import{Cb as c,J as h,N as l,Tb as u,ic as d,l as o,oa as a}from"./chunk-JZLEGW3Q.js";var x=(()=>{let s=class s{constructor(){this.http=l(c),this.notificationService=l(d),this.api=l(u),this.suppliers$=new o([]),this.supplierDialogVisible$=new o(!1),this.supplierBalance$=new o([]),this.supplierTotalDebts$=new o({id:0,balance:"0"}),this.tableLoading=a(!1),this.suppliersLoading=a(!1),this.signal_balanceLoading=a(!1),this.submitLoading=a(!1),this.host=this.api.host,this.getSuppliers()}getSuppliers(){this.suppliersLoading.set(!0),this.http.get(`${this.host}/suppliers`).subscribe({next:t=>{this.suppliers$.next(t)},error:t=>{this.notificationService.handleError(t.error,"suppliers"),this.suppliersLoading.set(!1)},complete:()=>{this.suppliersLoading.set(!1)}})}createSupplier(t){this.submitLoading.set(!0),this.http.post(`${this.host}/suppliers`,t).subscribe({next:e=>{this.notificationService.showSuccess("Supplier added successfully!","home"),this.suppliers$.next([...this.suppliers$.value,e.supplier]),this.supplierDialogVisible$.next(!1)},error:e=>{this.notificationService.showError(e.error.message,"home"),this.submitLoading.set(!1)},complete:()=>{this.submitLoading.set(!1)}})}updateSupplier(t){this.submitLoading.set(!0),this.http.put(`${this.host}/suppliers/${t.account_id}`,t).subscribe({next:e=>{let r=this.suppliers$.value.findIndex(p=>p.account_id==e.supplier.account_id),i=this.suppliers$.value;i[r]=e.supplier,this.suppliers$.next(i),this.notificationService.showSuccess("Data updated successfully!","home")},error:e=>{this.notificationService.showError(e,"home"),this.submitLoading.set(!1)},complete:()=>{this.submitLoading.set(!1),this.supplierDialogVisible$.next(!1)}})}deleteSupplier(t){this.submitLoading.set(!0),this.http.delete(`${this.host}/suppliers/${t.account_id}`).subscribe({next:e=>{let r=this.suppliers$.value,i=r.findIndex(p=>p.account_id==t.account_id);r.splice(i,1),this.suppliers$.next(r),this.notificationService.showSuccess(e.message,"home")},error:e=>{this.notificationService.handleError(e.error,"home"),this.submitLoading.set(!1)},complete:()=>{this.submitLoading.set(!1)}})}getSupplierTransactions(t,e,r){this.tableLoading.set(!0),this.http.get(`${this.host}/suppliers/transactions/${t}&${e}&${r}`).subscribe({next:i=>{this.supplierBalance$.next(i)},error:i=>{this.notificationService.handleError(i.error,"home"),this.tableLoading.set(!1)},complete:()=>{this.tableLoading.set(!1)}})}getAccountTotalBalance(t){this.signal_balanceLoading.set(!0),this.http.get(`${this.host}/suppliers/${t}/balance`).subscribe({next:e=>{this.supplierTotalDebts$.next(e)},error:e=>{this.notificationService.handleError(e.error,"home"),this.signal_balanceLoading.set(!1)},complete:()=>{this.signal_balanceLoading.set(!1)}})}};s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=h({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();export{x as a};
