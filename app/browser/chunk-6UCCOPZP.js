import{a as d}from"./chunk-BL26EFZV.js";import{Cb as h,J as l,N as r,Tb as u,ic as m,l as a,oa as e}from"./chunk-JZLEGW3Q.js";var f=class{constructor(){this.cost_dollar=0,this.subtotal_dollar=0,this.total_dollar=0,this.discount_dollar=0,this.discount2_dollar=0,this.total_dollar_discount_2=0,this.vat_dollar=0,this.total_qty=0}},_=function(i){return i.unit_price_usd="unit_price_usd",i.whole_price_usd="whole_price_usd",i}(_||{});var $=(()=>{let s=class s{constructor(){this.http=r(h),this.apiService=r(u),this.notificationService=r(m),this.stockService=r(d),this.invoice=e([]),this.selected_customer=e(null),this.payment_amount=e(0),this.signal_submited=e(!1),this.signal_submit_loading=e(!1),this.reset$=new a(!1),this.factor=e(1),this.barcodeResponse=new a(null),this.customerDialogVisible=e(!1)}submitBarcode(o){this.http.get(`${this.apiService.host}/stock/item/${o}`).subscribe({next:t=>{t?this.barcodeResponse.next(t):this.notificationService.showError("Item not found!","home")},error:t=>{this.notificationService.handleError(t.error,"home")}})}checkout(o,t){this.signal_submited.set(!0),this.signal_submit_loading.set(!0);let n=null;o.partner_id_fk&&t&&(n={amount:t,partner_id_fk:o.partner_id_fk,payment_date:o.order_datetime}),this.http.post(`${this.apiService.host}/supply`,{invoice:o,payment:n}).subscribe({next:c=>{this.notificationService.showSuccess("Invoice submitted","home")},error:c=>{this.notificationService.showError(c.error.message,"home"),this.signal_submit_loading.set(!1)},complete:()=>{this.stockService.getItems(),this.invoice.set([]),this.signal_submited.set(!1),this.signal_submit_loading.set(!1),this.reset$.next(!0),this.customerDialogVisible.set(!1)}})}checkoutDebt(){}};s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"});let i=s;return i})();export{f as a,_ as b,$ as c};
