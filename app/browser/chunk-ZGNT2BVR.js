import{a as De,b as Ee}from"./chunk-R26CEOUJ.js";import{a as Re,b as Te}from"./chunk-OZP7HNKL.js";import{c as B,f as Se,q as ye}from"./chunk-O7Y33RWW.js";import{b as we}from"./chunk-JLYTJQKU.js";import{a as ue,b as fe}from"./chunk-3SSLHLWI.js";import{f as ge,g as be,i as Ce,j as ve,m as xe,n as $}from"./chunk-SOXUPN2Q.js";import{$a as G,Aa as n,Ab as I,Ba as g,Cb as V,Fa as b,Ga as f,Ha as d,J as w,Jc as L,K as R,Kc as j,Lc as _e,Mc as P,N as p,Na as U,O as T,Oa as X,P as D,Pa as Y,Qa as q,Ra as l,Rb as Q,Sa as S,Ta as E,V as c,Va as Z,W as u,Wa as ee,Xa as te,Xb as F,Za as ie,_ as W,_a as v,ab as re,bd as he,cd as A,ec as N,ha as s,hc as H,ic as O,kc as oe,mc as J,oa as C,oc as le,pc as se,ra as h,sb as ne,ta as m,tc as me,ub as k,uc as ae,vc as de,wa as K,wb as M,xc as pe,za as r,zc as ce}from"./chunk-TC4DAS4S.js";var ke=(()=>{class t{constructor(){this.api=p(O),this.http=p(V),this.notificationService=p(H),this.reminders=C([]),this.remindersLoading=C(!1),this.getAllReminders()}getAllReminders(){this.remindersLoading.set(!0),this.http.get(`${this.api.host}/reminders`).subscribe({next:e=>{this.reminders.set(e),this.remindersLoading.set(!1)},error:e=>{this.notificationService.showError(e.error,"home"),this.remindersLoading.set(!1)}})}deleteReminder(e){this.http.delete(`${this.api.host}/reminders/${e}`).subscribe({next:i=>{this.notificationService.showSuccess(i.message,"home"),this.getAllReminders()},error:i=>{this.notificationService.showError(i.error,"home")}})}markNotified(e){this.http.patch(`${this.api.host}/reminders/notify`,e).subscribe({next:i=>{this.notificationService.showSuccess(i.message,"home"),this.getAllReminders()},error:i=>{this.notificationService.showError(i.error,"home")}})}markCompleted(e){this.http.patch(`${this.api.host}/reminders/complete`,e).subscribe({next:i=>{this.notificationService.showSuccess(i.message,"home"),this.getAllReminders()},error:i=>{this.notificationService.showError(i.error,"home")}})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Me=(()=>{class t{constructor(){this.api=p(O),this.http=p(V),this.notificationService=p(H),this.submitLoading=C(!1),this.reminderSubmitted=C(!1)}addReminder(e){this.submitLoading.set(!0),this.http.post(`${this.api.host}/reminders`,e).subscribe({next:i=>{this.notificationService.showSuccess(i.message,"home"),this.submitLoading.set(!1),this.reminderSubmitted.set(!this.reminderSubmitted())},error:i=>{this.notificationService.showError(i.error,"home"),this.submitLoading.set(!1)}})}updateReminder(e){this.submitLoading.set(!0),this.http.put(`${this.api.host}/reminders`,e).subscribe({next:i=>{this.notificationService.showSuccess(i.message,"home"),this.submitLoading.set(!1),this.reminderSubmitted.set(!this.reminderSubmitted())},error:i=>{this.notificationService.showError(i.error,"home"),this.submitLoading.set(!1)}})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Le=()=>({width:"65vw"}),je=()=>({"1199px":"75vw","575px":"95vw"}),Ie=t=>({"ng-invalid ng-dirty":t});function Pe(t,_){t&1&&(r(0,"small",17),l(1,"Title is required."),n())}function Ae(t,_){t&1&&(r(0,"small",17),l(1,"Date is required."),n())}function Be(t,_){if(t&1&&(r(0,"form",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"label",7),l(5,"Title"),r(6,"span",8),l(7," *"),n()(),g(8,"p-dropdown",9),h(9,Pe,2,0,"small",10),n()(),r(10,"div",5)(11,"label",11),l(12,"Due Date"),r(13,"span",8),l(14," *"),n()(),g(15,"p-calendar",12),h(16,Ae,2,0,"small",10),n(),r(17,"div",5)(18,"label",11),l(19,"Repeat"),r(20,"span",8),l(21," *"),n()(),g(22,"p-dropdown",13),n(),r(23,"div",14)(24,"label",15),l(25,"Reminder Notes"),n(),r(26,"textarea",16),l(27,"                    "),n()()()()),t&2){let e=d();m("formGroup",e.reminderForm),s(8),m("options",e.titles)("ngClass",G(10,Ie,e.reminder_title.invalid&&(e.reminder_title.dirty||e.reminder_title.touched||e.submitted))),s(),m("ngIf",e.reminder_title.invalid&&(e.reminder_title.dirty||e.reminder_title.touched||e.submitted)),s(6),m("showIcon",!1)("showClear",!0)("readonlyInput",!0)("ngClass",G(12,Ie,e.due_date.invalid&&(e.due_date.dirty||e.due_date.touched||e.submitted))),s(),m("ngIf",e.due_date.invalid&&(e.due_date.dirty||e.due_date.touched||e.submitted)),s(6),m("options",e.options)}}function $e(t,_){if(t&1){let e=b();r(0,"p-button",18),f("onClick",function(){c(e);let o=d();return u(o.closeDialog())}),n(),r(1,"p-button",19),f("onClick",function(){c(e);let o=d();return u(o.submitReminder())}),n()}if(t&2){let e=d();s(),m("loading",e.submitLoading())}}var z=(()=>{class t{set dialog_mode(e){this.dialogMode=e}set selected_reminder(e){this.reminderForm.patchValue(e)}get reminder_title(){return this.reminderForm.get("reminder_title")}get due_date(){return this.reminderForm.get("due_date")}closeDialog(){this.clearInputs(),this.OnClose.emit()}clearInputs(){this.visible=!1,this.reminderForm.reset()}submitReminder(){this.submitted=!0,this.reminderForm.valid&&(this.dialogMode==="add"?this.reminderDialogService.addReminder(this.reminderForm.value):this.dialogMode==="edit"&&this.reminderDialogService.updateReminder(this.reminderForm.value))}constructor(){this.visible=!1,this.OnClose=new W,this.OnSubmit=new W,this.dialogMode=null,this.confirmationService=p(F),this.reminderDialogService=p(Me),this.dateService=p(we),this.fb=p(pe),this.reminderForm=this.fb.group({reminder_id:[null],reminder_title:[null,J.required],due_date:[null,J.required],repeat_after:[null],reminder_text:[null]}),this.titles=[{label:"---",value:null},{label:"Vaccine",value:"Vaccine"},{label:"Deworming",value:"Deworming"},{label:"Defleaing",value:"Defleaing"},{label:"Hydatic cyst",value:"Hydatic cyst"},{label:"Other",value:"Other"}],this.options=[{label:"Never",value:null},{label:"Every Month",value:"30"},{label:"2 Months",value:"60"},{label:"3 Months",value:"90"},{label:"6 Months",value:"180"}],this.submitLoading=this.reminderDialogService.submitLoading,this.submitted=!1,this.reminderSubmitted=this.reminderDialogService.reminderSubmitted,ne(()=>{this.reminderSubmitted(),this.visible=!1,this.OnSubmit.emit()})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=T({type:t,selectors:[["reminder-dialog"]],inputs:{visible:"visible",dialog_mode:"dialog_mode",selected_reminder:"selected_reminder"},outputs:{OnClose:"OnClose",OnSubmit:"OnSubmit"},standalone:!0,features:[ie],decls:3,vars:11,consts:[["position","top","styleClass","p-fluid",3,"visibleChange","onHide","header","modal","visible","breakpoints","closeOnEscape","closable","maximizable"],["pTemplate","content"],["pTemplate","footer"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-4"],[1,"flex","flex-column","gap-2"],["for","Type"],[1,"text-red-500"],["formControlName","reminder_title","styleClass","p-inputtext-sm","appendTo","body","scrollHeight","300px",3,"options","ngClass"],["class","p-error",4,"ngIf"],["for","payment_date"],["formControlName","due_date","styleClass","p-inputtext-sm w-full","appendTo","body","dateFormat","yy-mm-dd","placeholder","Date",3,"showIcon","showClear","readonlyInput","ngClass"],["formControlName","repeat_after","styleClass","p-inputtext-sm","appendTo","body",3,"options"],[1,"field","col-12"],["for","notes"],["rows","6","cols","30","pInputTextarea","","formControlName","reminder_text","spellcheck","false"],[1,"p-error"],["pRipple","","size","small","label","Cancel","icon","pi pi-times","severity","secondary","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"onClick"],["pRipple","","size","small","label","Finish","icon","pi pi-check","severity","success","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"onClick","loading"]],template:function(i,o){i&1&&(r(0,"p-dialog",0),te("visibleChange",function(x){return ee(o.visible,x)||(o.visible=x),x}),f("onHide",function(){return o.closeDialog()}),h(1,Be,28,14,"ng-template",1)(2,$e,2,1,"ng-template",2),n()),i&2&&(K(v(9,Le)),m("header",o.dialogMode+" reminder")("modal",!0),Z("visible",o.visible),m("breakpoints",v(10,je))("closeOnEscape",!1)("closable",!0)("maximizable",!0))},dependencies:[I,k,M,j,L,N,ve,Ce,$,xe,B,ce,me,oe,le,se,ae,de,A,he,P,Ee,De]})}}return t})();var We=["rt"],qe=()=>[10,15,50,100],Ge=()=>["reminder_title","reminder_text","name","pet_name"],Qe=(t,_)=>({" pi-check-circle text-green-600":t,"pi-times-circle text-red-600":_});function Je(t,_){if(t&1){let e=b();r(0,"span",9),g(1,"i",10),r(2,"input",11,1),f("input",function(o){c(e),d();let a=q(6);return u(a.filterGlobal(o.target.value,"contains"))}),n()(),r(4,"p-button",12),f("click",function(){c(e);let o=d();return u(o.refreshReminders())}),n(),r(5,"p-button",13),f("click",function(){c(e);let o=d();return u(o.openReminderDialog("add"))}),n()}if(t&2){let e=d(),i=q(6);s(2),m("value",i.filters.global==null?null:i.filters.global.value),s(2),m("loading",e.remindersLoading())}}function Ke(t,_){t&1&&(r(0,"tr")(1,"th"),l(2,"Title"),n(),r(3,"th"),l(4,"Description"),n(),r(5,"th"),l(6,"Due Date"),n(),r(7,"th"),l(8,"Customer"),n(),r(9,"th"),l(10,"Pet Name"),n(),r(11,"th"),l(12,"is Notified?"),n(),r(13,"th",14),l(14,"Options"),n()())}function Ue(t,_){if(t&1&&(r(0,"small",22),l(1),n()),t&2){let e=d().$implicit;s(),E("Repeat each: ",e.repeat_after," days")}}function Xe(t,_){if(t&1&&(r(0,"small"),l(1),n()),t&2){let e=d().$implicit;s(),S(e.phone)}}function Ye(t,_){if(t&1){let e=b();r(0,"p-button",23),f("onClick",function(){c(e);let o=d().$implicit,a=d();return u(a.markCompleted(o))}),n()}}function Ze(t,_){if(t&1){let e=b();r(0,"tr")(1,"td"),l(2),n(),r(3,"td"),l(4),n(),r(5,"td"),l(6),g(7,"br"),h(8,Ue,2,1,"small",15),n(),r(9,"td"),l(10),g(11,"br"),h(12,Xe,2,1,"small",16),n(),r(13,"td"),l(14),n(),r(15,"td"),g(16,"i",17),n(),r(17,"td")(18,"p-button",18),f("onClick",function(){let o=c(e).$implicit,a=d();return u(a.openReminderDialog("edit",o))}),n(),r(19,"p-button",19),f("onClick",function(){let o=c(e).$implicit,a=d();return u(a.deleteReminder(o))}),n(),r(20,"p-button",20),f("onClick",function(){let o=c(e).$implicit,a=d();return u(a.markNotified(o))}),n(),h(21,Ye,1,0,"p-button",21),n()()}if(t&2){let e=_.$implicit;s(2),S(e.reminder_title),s(2),S(e.reminder_text||"---"),s(2),E(" ",e.due_date," "),s(2),m("ngIf",e.repeat_after),s(2),E(" ",e.name||"---"," "),s(2),m("ngIf",e.phone),s(2),S(e.pet_name||"---"),s(2),m("ngClass",re(9,Qe,e.has_notified,!e.has_notified)),s(5),m("ngIf",e.repeat_after)}}var Ve=(()=>{class t{constructor(){this.reminderService=p(ke),this.confirmationService=p(F),this.reminders=this.reminderService.reminders,this.remindersLoading=this.reminderService.remindersLoading,this.selectedReminder=null,this.reminderDialogVisible=!1}refreshReminders(){this.remindersTable?.reset(),this.reminderService.getAllReminders()}openReminderDialog(e,i){this.dialogMode=e,i?this.selectedReminder=i:this.selectedReminder=null,this.reminderDialogVisible=!0}closeDialog(){this.reminderDialogVisible=!1,this.selectedReminder=null}deleteReminder(e){this.confirmationService.confirm({key:"home",message:"Are you sure you want to delete selected reminder?",header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.reminderService.deleteReminder(e.reminder_id)}})}markNotified(e){this.confirmationService.confirm({key:"home",message:"Are you sure you want to mark selected reminder as notified?",header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.reminderService.markNotified(e)}})}markCompleted(e){this.confirmationService.confirm({key:"home",message:"Are you sure you want to mark selected reminder as completed?",header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.reminderService.markCompleted(e)}})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=T({type:t,selectors:[["app-reminders-home"]],viewQuery:function(i,o){if(i&1&&U(We,5),i&2){let a;X(a=Y())&&(o.remindersTable=a.first)}},decls:10,vars:14,consts:[["rt",""],["tableSearch",""],[1,"grid","m-1"],[1,"col-12"],["pTemplate","left"],["styleClass","p-datatable-sm","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","globalFilterFields","filterDelay","loading"],["pTemplate","header"],["pTemplate","body"],[3,"OnClose","OnSubmit","visible","dialog_mode","selected_reminder"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","search","placeholder","Search ...",1,"p-inputtext-sm",3,"input","value"],["label","Refresh","icon","pi pi-refresh","size","small","styleClass","mx-2 ",3,"click","loading"],["label","New","icon","pi pi-plus","severity","success","size","small",3,"click"],["width","15%"],["class","text-green-600",4,"ngIf"],[4,"ngIf"],[1,"pi",3,"ngClass"],["pTooltip","Edit","tooltipPosition","bottom","size","small","severity","warning","icon","fas fa-edit","styleClass","mr-2",3,"onClick"],["pTooltip","Delete","tooltipPosition","bottom","size","small","severity","danger","icon","pi pi-trash","styleClass","mr-2",3,"onClick"],["pTooltip","Mark as Notified","tooltipPosition","bottom","size","small","severity","info","icon","pi pi-envelope","styleClass","mr-2",3,"onClick"],["pTooltip","Mark as Completed","tooltipPosition","bottom","size","small","severity","success","icon","pi pi-check",3,"onClick",4,"ngIf"],[1,"text-green-600"],["pTooltip","Mark as Completed","tooltipPosition","bottom","size","small","severity","success","icon","pi pi-check",3,"onClick"]],template:function(i,o){if(i&1){let a=b();r(0,"div",2)(1,"div",3)(2,"p-card")(3,"p-toolbar"),h(4,Je,6,2,"ng-template",4),n(),r(5,"p-table",5,0),h(7,Ke,15,0,"ng-template",6)(8,Ze,22,12,"ng-template",7),n()()()(),r(9,"reminder-dialog",8),f("OnClose",function(){return c(a),u(o.closeDialog())})("OnSubmit",function(){return c(a),u(o.refreshReminders())}),n()}i&2&&(s(5),m("value",o.reminders())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",v(12,qe))("alwaysShowPaginator",!0)("globalFilterFields",v(13,Ge))("filterDelay",0)("loading",o.remindersLoading()),s(4),m("visible",o.reminderDialogVisible)("dialog_mode",o.dialogMode)("selected_reminder",o.selectedReminder))},dependencies:[k,M,ue,N,L,Se,_e,Re,z,ge]})}}return t})();var et=[{path:"",component:Ve}],Fe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=D({type:t})}static{this.\u0275inj=R({imports:[Q.forChild(et),Q]})}}return t})();var mi=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=D({type:t})}static{this.\u0275inj=R({imports:[I,Fe,fe,j,ye,A,P,B,$,Te,z,be]})}}return t})();export{mi as RemindersModule};
