import{a as st}from"./chunk-63KXPUF2.js";import{b as lt}from"./chunk-LP6R2AFH.js";import{a as tt,b as rt}from"./chunk-PJCVBQFC.js";import{b as Pe,c as Z}from"./chunk-VKP2AKCV.js";import{a as Te,b as Ie}from"./chunk-B2XT5LEY.js";import{a as Y,b as Xe,c as et,d as it}from"./chunk-VNAT6VYV.js";import{a as nt,b as ot,c as at,d as U}from"./chunk-MJWYV7CD.js";import"./chunk-E6DUUYUZ.js";import{a as je}from"./chunk-C34M2Y2L.js";import"./chunk-HBV3JCH5.js";import{b as $e}from"./chunk-2DP6OD2H.js";import{a as Ge,b as Ye}from"./chunk-ZKGHWGWT.js";import{a as Qe,b as qe}from"./chunk-MLRNSTUI.js";import"./chunk-DGA2XWKA.js";import{b as pt}from"./chunk-ME3YGXK4.js";import{b as ke}from"./chunk-U43PS4HY.js";import{c as We}from"./chunk-XUPVQC5T.js";import"./chunk-MZ2S7L7H.js";import{a as Ue,b as Je}from"./chunk-LQ62Q6FC.js";import{b as De,c as He,e as Re,f as Be,k as ze,l as Ne,q as Ae}from"./chunk-GS7Z4KHG.js";import{b as Ke}from"./chunk-WXPCUA65.js";import"./chunk-GS2HDMHU.js";import{b as Ze}from"./chunk-CPOYLKXI.js";import"./chunk-BWBVWMZW.js";import{a as fe,b as ye}from"./chunk-ASN6MEGG.js";import{i as Oe,j as Ee,n as Fe}from"./chunk-2OAYZYPU.js";import{$a as E,Aa as r,Ab as D,Ba as v,Ec as Ce,Fa as f,Fc as ve,Ga as h,Ha as l,Hc as we,Jc as be,K as x,Kc as xe,Mc as Se,N as S,Na as F,O as H,Oa as L,P as T,Pa as M,Ra as u,Rb as G,Sa as O,Ta as C,Ub as pe,V as d,Va as I,W as m,Wa as k,X as ee,Xa as P,Xb as ce,Y as te,Za as oe,_a as j,a as J,ab as q,ad as Ve,b as K,ba as z,bd as Le,cd as Me,ec as W,fc as R,ga as $,ha as p,hb as b,hc as de,i as X,ib as V,oc as me,pa as ie,ra as g,sa as N,sc as ue,ta as c,ub as ae,vb as re,wa as ne,wb as le,xa as A,xc as _e,ya as Q,yc as ge,za as a,zb as se,zc as he}from"./chunk-TB3GCOGJ.js";var Tt=["barcodeInput"],It=["invoiceTable"],kt=["editQty"],Pt=["editPrice"],Vt=["payment_input"],Lt=()=>({width:"65vw"}),Mt=()=>({"1199px":"75vw","575px":"95vw"}),Ot=()=>({standalone:!0}),ct=n=>({invalid:n}),Et=(n,s)=>({"text-red-500":n,"text-orange-500":s}),Dt=n=>({"text-red-500":n}),dt=n=>({selected:n});function Ht(n,s){if(n&1&&(a(0,"h2",26),u(1),b(2,"currency"),r()),n&2){let e=l();p(),C(" USD: ",V(2,1,e.invoiceTotal.subtotal_dollar)," ")}}function Ft(n,s){if(n&1&&(a(0,"h2",27),u(1),b(2,"dollar"),r()),n&2){let e=l();p(),C(" Total: ",V(2,1,e.invoiceTotal.subtotal_dollar)," ")}}function Rt(n,s){if(n&1){let e=f();a(0,"div",33)(1,"label",34),u(2,"Operation Type"),r(),a(3,"p-dropdown",35),P("ngModelChange",function(i){d(e);let o=l(2);return k(o.operation_type,i)||(o.operation_type=i),m(i)}),r()()}if(n&2){let e=l(2);p(3),I("ngModel",e.operation_type),c("options",e.operations)("autoOptionFocus",!1)}}function Bt(n,s){if(n&1){let e=f();a(0,"div",28)(1,"div",29)(2,"label",36),u(3,"Payment"),r(),a(4,"p-inputNumber",37,2),P("ngModelChange",function(i){d(e);let o=l(2);return k(o.payment_amount,i)||(o.payment_amount=i),m(i)}),h("onFocus",function(i){d(e);let o=l(2);return m(o.select(i.target))}),r()()(),a(6,"div",38)(7,"table",39)(8,"tr")(9,"th",40),u(10,"Old Balance:"),r(),a(11,"th")(12,"app-text-with-loading",41)(13,"span"),u(14),b(15,"currency"),r()()()(),a(16,"tr")(17,"th",40),u(18,"Current:"),r(),a(19,"th"),u(20),b(21,"currency"),r()(),a(22,"tr")(23,"th",40),u(24,"Payment:"),r(),a(25,"th"),u(26),b(27,"currency"),r()(),a(28,"tr")(29,"td",42),v(30,"p-divider",21),r()(),a(31,"tr")(32,"th",40),u(33,"New Balance:"),r(),a(34,"th")(35,"app-text-with-loading",43)(36,"span"),u(37),b(38,"currency"),r()()()()()()}if(n&2){let e=l(2);p(4),I("ngModel",e.payment_amount),c("ngModelOptions",j(21,Ot))("buttonLayout","horizontal")("step",1)("min",0),p(8),c("isLoading",e.customer_balance_loading())("loadingBar",!0),p(2),O(V(15,13,e.customer_balance().balance)),p(6),C(" ",V(21,15,e.invoiceTotal.subtotal_dollar)," "),p(6),C(" ",V(27,17,e.payment_amount())," "),p(9),c("isLoading",e.customer_balance_loading())("loadingBar",!0),p(2),O(V(38,19,e.calculateNewBalance(e.invoiceTotal.subtotal_dollar,e.customer_balance().balance,e.payment_amount())))}}function zt(n,s){if(n&1){let e=f();a(0,"div",13)(1,"div",28)(2,"div",29)(3,"label",30),u(4,"Customer"),r(),a(5,"p-dropdown",31),h("onShow",function(){d(e);let i=l();return m(i.dropDownVisible=!0)})("onHide",function(){d(e);let i=l();return m(i.dropDownVisible=!1)}),P("ngModelChange",function(i){d(e);let o=l();return k(o.selected_customer_id,i)||(o.selected_customer_id=i),m(i)}),h("ngModelChange",function(){d(e);let i=l();return m(i.getCustomerBalance())}),r()(),g(6,Rt,4,3,"div",32),r(),g(7,Bt,39,22),r()}if(n&2){let e=l();p(5),c("loading",e.signal_tableLoading()),I("ngModel",e.selected_customer_id),c("options",e.customers())("filter",!0)("showClear",!0)("autoOptionFocus",!1),p(),c("ngIf",e.selected_customer_id()),p(),Q(e.selected_customer_id()&&e.operation_type()=="debt"?7:-1)}}function Nt(n,s){n&1&&(a(0,"tr")(1,"th",44),u(2,"Barcode"),r(),a(3,"th",45),u(4,"Description"),r(),a(5,"th",46),u(6,"Unit"),r(),a(7,"th",46),u(8,"Discount"),r(),a(9,"th",47),u(10,"Qty"),r(),a(11,"th",46),u(12,"Total"),r(),a(13,"th",48),u(14,"Del?"),r()())}function At(n,s){if(n&1){let e=f();a(0,"p-inputNumber",57,3),P("ngModelChange",function(i){d(e);let o=l().$implicit;return k(o.unit_price,i)||(o.unit_price=i),m(i)}),h("ngModelChange",function(){d(e);let i=l().rowIndex,o=l();return m(o.setPrice(i))})("onFocus",function(i){d(e);let o=l(2);return m(o.select(i.target))}),r()}if(n&2){let e=l().$implicit;I("ngModel",e.unit_price),c("maxFractionDigits",2)("min",0)}}function jt(n,s){n&1&&v(0,"i",60)}function Qt(n,s){if(n&1&&(a(0,"span",58),u(1),b(2,"currency"),a(3,"span"),g(4,jt,1,0,"i",59),r()()),n&2){let e=l().$implicit,t=l();c("ngClass",q(5,Et,!e.unit_price,t.getPriceWarining(e))),p(),O(V(2,3,e.unit_price)),p(3),c("ngIf",t.getPriceWarining(e))}}function qt(n,s){if(n&1){let e=f();a(0,"p-inputNumber",57,3),P("ngModelChange",function(i){d(e);let o=l().$implicit;return k(o.discount_percentage,i)||(o.discount_percentage=i),m(i)}),h("ngModelChange",function(){d(e);let i=l().rowIndex,o=l();return m(o.onDiscountChange(i))})("onFocus",function(i){d(e);let o=l(2);return m(o.select(i.target))}),r()}if(n&2){let e=l().$implicit;I("ngModel",e.discount_percentage),c("maxFractionDigits",2)("min",0)}}function Wt(n,s){if(n&1&&(a(0,"span"),u(1),r()),n&2){let e=l().$implicit;p(),C("",e.discount_percentage,"%")}}function Zt(n,s){if(n&1){let e=f();a(0,"p-inputNumber",61,4),P("ngModelChange",function(i){d(e);let o=l().$implicit;return k(o.quantity,i)||(o.quantity=i),m(i)}),h("onFocus",function(i){d(e);let o=l(2);return m(o.select(i.target))})("ngModelChange",function(){d(e);let i=l().$implicit,o=l();return m(o.setQty(i))}),r()}if(n&2){let e=l().$implicit;I("ngModel",e.quantity),c("maxFractionDigits",2)("minFractionDigits",0)}}function Ut(n,s){if(n&1&&(a(0,"span",58),u(1),r()),n&2){let e=l().$implicit;c("ngClass",E(2,Dt,!e.quantity)),p(),O(e.quantity)}}function Jt(n,s){if(n&1&&(a(0,"td"),u(1),r()),n&2){let e=l().$implicit;p(),C(" ",(e.currency=="lira",e.unit_price*e.quantity)," ")}}function Kt(n,s){if(n&1&&(a(0,"td"),u(1),b(2,"currency"),r()),n&2){let e=l().$implicit;p(),C(" ",e.currency=="lira"?e.unit_price*e.quantity:V(2,1,e.unit_price*e.quantity)," ")}}function $t(n,s){if(n&1){let e=f();a(0,"tr")(1,"td"),u(2),r(),a(3,"td"),u(4),v(5,"br"),a(6,"small"),u(7),r()(),a(8,"td",49)(9,"p-cellEditor"),g(10,At,2,3,"ng-template",50)(11,Qt,5,8,"ng-template",51),r()(),a(12,"td",52)(13,"p-cellEditor"),g(14,qt,2,3,"ng-template",50)(15,Wt,2,1,"ng-template",51),r()(),a(16,"td",53)(17,"p-cellEditor"),g(18,Zt,2,3,"ng-template",50)(19,Ut,2,4,"ng-template",51),r()(),g(20,Jt,2,1,"td",54)(21,Kt,3,3,"td",54),a(22,"td",55),h("click",function(){let i=d(e).rowIndex,o=l();return m(o.removeRow(i))}),v(23,"i",56),r()()}if(n&2){let e=s.$implicit,t=l();p(2),O(e.barcode||"---"),p(2),C(" ",e.product_name," "),p(3),O(e.expiry_date),p(),c("pEditableColumn",e.unit_price)("ngClass",E(10,ct,!e.unit_price)),p(4),c("pEditableColumn",e.discount_percentage),p(4),c("pEditableColumn",e.quantity)("ngClass",E(12,ct,!e.quantity)),p(4),c("ngIf",t.view_currency=="lira"),p(),c("ngIf",t.view_currency=="dollar")}}function Gt(n,s){if(n&1&&(a(0,"h4",63),u(1),r()),n&2){let e=l(2);p(),C(" Total units: ",e.invoiceTotal.total_qty," ")}}function Yt(n,s){if(n&1&&g(0,Gt,2,1,"h4",62),n&2){let e=l();c("ngIf",e.invoiceTotal.total_qty)}}function Xt(n,s){n&1&&(a(0,"tr",64)(1,"td",65),u(2,"No data yet!"),r()())}function ei(n,s){if(n&1){let e=f();a(0,"p-autoComplete",66,5),P("ngModelChange",function(i){d(e);let o=l();return k(o.search_product,i)||(o.search_product=i),m(i)}),h("completeMethod",function(i){d(e);let o=l();return m(o.searchItem(i))})("onKeyUp",function(i){d(e);let o=l();return m(o.submitInvoiceInput(i))}),r()}if(n&2){let e=l();I("ngModel",e.search_product),c("suggestions",e.searchedItems)("delay",150)}}function ti(n,s){if(n&1){let e=f();a(0,"p-button",67),h("onClick",function(){d(e);let i=l();return m(i.clearInvoice())}),r(),a(1,"p-button",68),h("onClick",function(){d(e);let i=l();return m(i.checkout())}),r()}if(n&2){let e=l();c("disabled",e.invoice().length==0),p(),c("loading",e.submitCheckoutLoading())("disabled",e.invoice().length==0)}}function ii(n,s){n&1&&v(0,"p-progressSpinner")}function ni(n,s){if(n&1){let e=f();a(0,"div",20)(1,"div",70),h("click",function(){let i=d(e).$implicit,o=l(2);return m(o.selectCategory(i))}),a(2,"p",71),u(3),r()()()}if(n&2){let e=s.$implicit,t=l(2);p(),c("ngClass",E(2,dt,t.selectedCategory()==e)),p(2),C(" ",e.category_name," ")}}function oi(n,s){if(n&1&&(g(0,ni,4,4,"div",69),b(1,"category")),n&2){let e=l();c("ngForOf",V(1,1,e.categories()))}}function ai(n,s){n&1&&v(0,"p-progressSpinner")}function ri(n,s){if(n&1){let e=f();a(0,"div",74)(1,"div",75),h("click",function(){let i=d(e).$implicit,o=l(2);return m(o.selectItem(i))}),a(2,"p",71),u(3),r()()()}if(n&2){let e=s.$implicit;p(3),C(" ",e.product_name," ")}}function li(n,s){if(n&1){let e=f();a(0,"p-messages",76),P("valueChange",function(i){d(e);let o=l(2);return k(o.message,i)||(o.message=i),m(i)}),r()}if(n&2){let e=l(2);I("value",e.message),c("closable",!1)}}function si(n,s){if(n&1&&(a(0,"div",13),g(1,ri,4,1,"div",72),r(),g(2,li,1,2,"p-messages",73)),n&2){let e,t=l();p(),c("ngForOf",t.filteredItems()),p(),c("ngIf",t.filteredItems().length==0&&((e=t.selectedCategory())==null?null:e.category_id))}}function pi(n,s){if(n&1){let e=f();a(0,"div",78)(1,"div",79),h("click",function(){let i=d(e).$implicit,o=l(2);return m(o.selectedVariant=i)})("dblclick",function(){d(e);let i=l(2);return m(i.submitVariant())}),a(2,"p"),u(3),v(4,"br"),a(5,"small"),u(6),r()()()()}if(n&2){let e=s.$implicit,t=l(2);p(),c("ngClass",E(3,dt,t.selectedVariant==e)),p(2),C(" ",e.expiry_date," "),p(3),C("Current qty: ",e.variant_quantity,"")}}function ci(n,s){if(n&1&&(a(0,"div",13),g(1,pi,7,5,"div",77),r()),n&2){let e=l();p(),c("ngForOf",e.variantsToSelect)}}function di(n,s){if(n&1){let e=f();a(0,"p-button",80),h("onClick",function(){d(e);let i=l();return m(i.variantDialogVisible=!1)}),r(),a(1,"p-button",81),h("onClick",function(){d(e);let i=l();return m(i.submitVariant())}),r()}}var mt=(()=>{let s=class s{constructor(){this.fb=S(_e),this.customersService=S(We),this.stockService=S(je),this.sellService=S(et),this.notificationsService=S(de),this.confirmationService=S(ce),this.localStorageService=S(tt),this.dateService=S(Ze),this.decimalService=S(it),this.vh=this.localStorageService.getSellPageViewHeight(),this.invoiceTotal=new Y,this.search_product=null,this.searchedItems=[],this.customers=this.customersService.customers,this.view_currency="dollar",this.dialog_products_visible=!1,this.invoice=this.sellService.invoice,this.submited=this.sellService.signal_submited,this.products=this.stockService.products,this.submitCheckoutLoading=this.sellService.submitCheckoutLoading,this.stockTableLoading=this.stockService.tableLoading,this.signal_tableLoading=this.customersService.signal_tableLoading,this.subscriptions=new X,this.priceTypes=Object.keys(Xe),this.today=this.dateService.getCurrentDate(),this.variantDialogVisible=!1,this.productToAdd=null,this.variantsToSelect=[],this.selectedVariant=null,this.categories=this.stockService.categories,this.selectedCategory=this.stockService.selectedCategorySell,this.filteredItems=this.stockService.sellFilteredItems,this.categoriesLoading=this.stockService.categoriesLoading,this.sellProductsLoading=this.stockService.sellProductsLoading,this.dropDownVisible=!1,this.selected_customer_id=this.sellService.selected_customer_id,this.operations=[{label:"Normal",value:"normal"},{label:"Debt",value:"debt"}],this.operation_type=this.sellService.operation_type,this.customer_balance_loading=this.customersService.signal_balanceLoading,this.customer_balance=this.customersService.customersTotalDebts$,this.payment_amount=this.sellService.payment_amount}onKeyDown(t){if(this.dropDownVisible||this.dialog_products_visible)return;let i=this.editPrice||this.editQty||this.payment_input;(!i||!i.focused)&&this.focusBarcodeInput()}focusBarcodeInput(){this.barcodeInput.nativeElement.children[0].children[0].focus()}ngOnInit(){this.message=[{severity:"info",detail:"No items in this category yet!"}],this.messages=[{severity:"info",detail:"No Invoice Yet!"}],this.calculateTotal(),this.subscriptions.add(this.sellService.reset$.subscribe(t=>{t&&(this.init(),this.sellService.reset$.next(!1))})),this.subscriptions.add(this.sellService.barcodeResponse.subscribe(t=>{t&&(this.addProduct(t),this.sellService.barcodeResponse.next(null))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}setPrice(t){this.updatedRowIndex=t}onDiscountChange(t){this.updatedRowIndex=t}onEditComplete(t){t.field=="discount_percentage"?this.invoice.update(i=>i.map((o,_)=>this.updatedRowIndex===_?K(J({},o),{unit_price:parseFloat((o.original_price*(1-o.discount_percentage/100)).toFixed(2))}):o)):t.field=="unit_price"&&this.invoice.update(i=>i.map((o,_)=>this.updatedRowIndex===_?K(J({},o),{discount_percentage:parseFloat((100*(1-o.unit_price/o.original_price)).toFixed(2))}):o)),this.calculateTotal()}setQty(t){this.calculateTotal()}select(t){t.select()}init(){this.sellService.selected_customer_id.set(null),this.sellService.operation_type.set("normal"),this.sellService.payment_amount.set(0),this.sellService.invoice.set([]),this.submited.set(!1),this.calculateTotal()}clearInvoice(){this.confirmationService.confirm({key:"home",message:"Are you sure that you want to clear invoice?",header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.init()}})}searchItem(t){let i=this.products(),o=[],_=t.query;for(let w=0;w<i.length;w++){let y=i[w];y.product_name.toLowerCase().indexOf(_.toLowerCase())>-1&&o.push(y)}this.searchedItems=o}addProduct(t){this.productToAdd=t,t.has_variants&&t.variants_records?t.variants_records.length==1?this.addProductToInvoice(t,t.variants_records[0]):(this.variantsToSelect=[],t.variants_records.forEach(i=>{i.variant_quantity>0&&this.variantsToSelect.push(i)}),this.variantsToSelect.length===0&&(this.variantsToSelect=t.variants_records),this.variantDialogVisible=!0):this.addProductToInvoice(t)}addProductToInvoice(t,i=null){let o=this.invoice().find(_=>_.product_id===t.product_id&&_.variant_id===i?.variant_id);o?o.quantity+=1:this.invoice().push({product_id:t.product_id,barcode:t.barcode,product_name:t.product_name,original_price:t.unit_price_usd,unit_cost:t.unit_cost_usd,unit_price:t.unit_price_usd,discount_percentage:0,quantity:1,variant_id:i?.variant_id,expiry_date:i?.expiry_date,stock_management:t.stock_management}),this.calculateTotal()}submitVariant(){this.addProductToInvoice(this.productToAdd,this.selectedVariant),this.variantDialogVisible=!1}resetVariantsDialog(){this.variantDialogVisible=!1,this.productToAdd=null,this.selectedVariant=null}submitInvoiceInput(t){t.key==="Enter"&&this.search_product&&(typeof this.search_product=="string"?this.submitBarcode(this.search_product):this.sellService.barcodeResponse.next(this.search_product),this.search_product=null)}submitBarcode(t){if(t){let i=-1,o=["*","+"];for(let y=0;y<o.length;y++)if(t.indexOf(o[y])!==-1){i=t.indexOf(o[y]);break}let _=t.substring(0,i)||1,w=parseInt(t.substring(i+1,t.length));i!=-1&&i!=0?(this.sellService.factor.set(parseInt(_)),this.sellService.submitBarcode(w)):this.sellService.submitBarcode(t)}}removeRow(t){this.invoice().splice(t,1),this.calculateTotal(),this.validateItems()}assignSelectedProducts(t){this.dialog_products_visible=!1,t.forEach(i=>{this.addProduct(i)})}calculateTotal(){let t=new Y,i=this.invoice();return i.length>0&&(i.forEach(o=>{t.total_qty+=o.quantity,t.cost_dollar+=o.unit_cost*o.quantity,t.subtotal_dollar+=o.unit_price*o.quantity}),t.total_dollar=t.subtotal_dollar-t.discount_dollar),this.invoiceTotal=t,t}parseFloat(t){return parseFloat(t)}validateItems(){return!1}getPriceWarining(t){if(!t.unit_price)return!1;let i=t.unit_cost||0,o=t.unit_price;return typeof i=="string"&&(i=parseFloat(i)),typeof o=="string"&&(o=parseFloat(o)),o<i}checkout(){let t=this.validateItems();t?(this.submited.set(!0),t&&this.notificationsService.showError("Please enter price for all items","home")):this.confirmationService.confirm({key:"home",message:'Are you sure that you want to submit invoice"?',header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-success",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.sellService.checkout({operation_type:this.operation_type(),customer_id:this.selected_customer_id(),exchange_rate:this.stockService.exchangeRate().rate_value,total_amount:this.invoiceTotal.total_dollar,total_cost:this.invoiceTotal.cost_dollar,items:this.invoice()},this.payment_amount())}})}selectCategory(t){this.stockService.selectedCategorySell.set(t),this.stockService.getFilteredItems(t,"sell")}selectItem(t){this.addProduct(t)}getCustomerBalance(){this.selected_customer_id()?this.customersService.getCustomerTotalBalance(this.selected_customer_id()):this.customer_balance.set({id:0,balance:"0"})}calculateNewBalance(t,i=0,o=0){return i=parseFloat(i),this.decimalService.subtract(this.decimalService.add(i,t),o)}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=H({type:s,selectors:[["app-sell-home"]],viewQuery:function(i,o){if(i&1&&(F(Tt,5,z),F(It,5),F(kt,5),F(Pt,5),F(Vt,5)),i&2){let _;L(_=M())&&(o.barcodeInput=_.first),L(_=M())&&(o.invoiceTable=_.first),L(_=M())&&(o.editQty=_.first),L(_=M())&&(o.editPrice=_.first),L(_=M())&&(o.payment_input=_.first)}},hostBindings:function(i,o){i&1&&h("keydown",function(w){return o.onKeyDown(w)},!1,$)},decls:35,vars:16,consts:[["desktopTable",""],["invoiceTable",""],["payment_input",""],["editPrice",""],["editQty",""],["barcodeInput",""],[1,"grid","m-1"],[1,"col-6"],["styleClass","mb-3 p-2"],["pTemplate","left"],["pTemplate","right"],["pTemplate","body"],["styleClass","mt-2"],[1,"grid"],[1,"col-12"],["dataKey","product_id","styleClass","p-datatable-sm small-table","editMode","cell",3,"onEditComplete","value"],["pTemplate","header"],["pTemplate","summary"],["pTemplate","emptymessage"],["styleClass","mt-2 p-2"],[1,"col-3","p-1"],["styleClass","m-0"],[3,"onHide","onSubmit","visible","products","tableLoading"],["position","top","header","Choose Variant","styleClass","p-fluid",3,"visibleChange","onHide","visible","modal","breakpoints","closeOnEscape","closable"],["pTemplate","content"],["pTemplate","footer"],[1,"text-green-600","m-2"],[1,"text-primary","m-2"],[1,"col-4"],[1,"flex","flex-column","gap-2"],["for","customer"],["styleClass","p-inputtext-sm","id","customer","appendTo","body","optionLabel","name","optionValue","account_id","placeholder","Select Customer","filterBy","name",3,"onShow","onHide","ngModelChange","loading","ngModel","options","filter","showClear","autoOptionFocus"],["class","flex flex-column gap-2 mt-2",4,"ngIf"],[1,"flex","flex-column","gap-2","mt-2"],["for","option"],["styleClass","p-inputtext-sm","appendTo","body","optionLabel","label","optionValue","value","placeholder","Operation Type",3,"ngModelChange","ngModel","options","autoOptionFocus"],["for","currency"],["inputId","currency-us","mode","currency","currency","USD","locale","en-US","styleClass","p-inputtext-sm w-full",3,"ngModelChange","onFocus","ngModel","ngModelOptions","buttonLayout","step","min"],[1,"col-4","flex","justify-content-end"],[1,"text-right"],[1,"text-green-500"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","50%",3,"isLoading","loadingBar"],["colspan","2"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","63%",3,"isLoading","loadingBar"],["width","18%"],["width","40%"],["width","10%"],["width","7%"],["width","5%"],["pEditableColumnField","unit_price",3,"pEditableColumn","ngClass"],["pTemplate","input"],["pTemplate","output"],["pEditableColumnField","discount_percentage",3,"pEditableColumn"],["pEditableColumnField","quantity",3,"pEditableColumn","ngClass"],[4,"ngIf"],[1,"danger-hover",3,"click"],[1,"pi","pi-trash"],["styleClass","input-align-center","step","0",1,"p-inputtext-sm","priceEditable",3,"ngModelChange","onFocus","ngModel","maxFractionDigits","min"],[3,"ngClass"],["class","pi pi-exclamation-triangle ml-2",4,"ngIf"],[1,"pi","pi-exclamation-triangle","ml-2"],["min","0.1","step","0.1",1,"p-inputtext-sm","editable",3,"ngModelChange","onFocus","ngModel","maxFractionDigits","minFractionDigits"],["class","text-center m-0",4,"ngIf"],[1,"text-center","m-0"],[1,"surface-300"],["colspan","9"],["field","product_name","name","barcodeInput","placeholder","scan or search ...","spellcheck","false",1,"p-inputtext-sm","mr-2",3,"ngModelChange","completeMethod","onKeyUp","ngModel","suggestions","delay"],["label","Clear","icon","pi pi-times","severity","danger","size","small","styleClass","mx-2",3,"onClick","disabled"],["label","Checkout","icon","pi pi-cart-plus","severity","success","size","small",3,"onClick","loading","disabled"],["class","col-3 p-1",4,"ngFor","ngForOf"],[1,"dark-hover","p-2","border-round","shadow-2","maxHeight","flex","align-items-center","justify-content-center",3,"click","ngClass"],[1,"m-0","text-center","p-1"],["class","col-3",4,"ngFor","ngForOf"],[3,"value","closable","valueChange",4,"ngIf"],[1,"col-3"],[1,"bg-dark","black-hover","shadow-1","p-2","border-round","maxHeight","flex","align-items-center","justify-content-center",3,"click"],[3,"valueChange","value","closable"],["class","col-12 md:col-3",4,"ngFor","ngForOf"],[1,"col-12","md:col-3"],[1,"dark-hover","shadow-2","p-3","text-center","border-round",3,"click","dblclick","ngClass"],["pRipple","","size","small","label","Cancel","icon","pi pi-times","severity","secondary","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"onClick"],["pRipple","","size","small","label","Finish","icon","pi pi-check","severity","success","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"onClick"]],template:function(i,o){if(i&1){let _=f();a(0,"div",6)(1,"div",7)(2,"p-toolbar",8),g(3,Ht,3,3,"ng-template",9)(4,Ft,3,3,"ng-template",10),r(),a(5,"p-card"),g(6,zt,8,8,"ng-template",11),r(),a(7,"p-card",12,0)(9,"div",13)(10,"div",14)(11,"p-table",15,1),h("onEditComplete",function(y){return d(_),m(o.onEditComplete(y))}),g(13,Nt,15,0,"ng-template",16)(14,$t,24,14,"ng-template",11)(15,Yt,1,1,"ng-template",17)(16,Xt,3,0,"ng-template",18),r(),a(17,"p-toolbar",19),g(18,ei,2,3,"ng-template",9)(19,ti,2,3,"ng-template",10),r()()()()(),a(20,"div",7)(21,"p-card")(22,"div",13),g(23,ii,1,0,"p-progressSpinner")(24,oi,2,3,"div",20),r(),a(25,"p-divider",21)(26,"p")(27,"strong"),u(28),r()()(),g(29,ai,1,0,"p-progressSpinner")(30,si,3,2),r()()(),a(31,"products-dialog",22),h("onHide",function(){return d(_),m(o.dialog_products_visible=!1)})("onSubmit",function(y){return d(_),m(o.assignSelectedProducts(y))}),r(),a(32,"p-dialog",23),P("visibleChange",function(y){return d(_),k(o.variantDialogVisible,y)||(o.variantDialogVisible=y),m(y)}),h("onHide",function(){return d(_),m(o.resetVariantsDialog())}),g(33,ci,2,1,"ng-template",24)(34,di,2,0,"ng-template",25),r()}if(i&2){let _;p(11),c("value",o.invoice()),p(12),Q(o.categoriesLoading()?23:24),p(5),O(((_=o.selectedCategory())==null?null:_.category_name)||"No Category Selected!"),p(),Q(o.sellProductsLoading()?29:30),p(2),c("visible",o.dialog_products_visible)("products",o.products)("tableLoading",o.stockTableLoading()),p(),ne(j(14,Lt)),I("visible",o.variantDialogVisible),c("modal",!0)("breakpoints",j(15,Mt))("closeOnEscape",!1)("closable",!0)}},dependencies:[ae,re,le,me,ue,be,W,Oe,fe,nt,De,Be,ze,Ne,Ue,Qe,U,Le,Ge,Z,Te,se,at,rt],styles:["[_nghost-%COMP%]  .p-fieldset .p-fieldset-content{padding:.5rem}.editable[_ngcontent-%COMP%]{width:45px;height:28px}.priceEditable[_ngcontent-%COMP%]{width:60px;height:28px;text-align:center}[_nghost-%COMP%]  .p-inputnumber-input{width:100%}td[_ngcontent-%COMP%]:has(span.p-inputnumber.p-component){padding:0}td[_ngcontent-%COMP%]:has(.no-padding){padding:0}.input-align-center[_ngcontent-%COMP%], [_nghost-%COMP%]   .editable[_ngcontent-%COMP%]     span.p-inputnumber.p-component .p-inputnumber-input{text-align:center}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}[_nghost-%COMP%]  .small-button{font-size:.5rem!important;padding:.2rem .4rem!important;width:2rem!important}[_nghost-%COMP%]  .small-input>span>input{padding:.3rem!important;width:2rem!important;text-align:center}[_nghost-%COMP%]  .invoice-body>div>div{padding:0!important}[_nghost-%COMP%]  .p-dataview-emptymessage{display:none}[_nghost-%COMP%]  .p-card-content{padding:0!important}.invalid[_ngcontent-%COMP%]{border-color:var(--red-500)!important}.category-cards[_ngcontent-%COMP%]{border-radius:6px;color:#343a40;text-align:center;padding:.8rem;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f}.selected[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}[_nghost-%COMP%]  .p-datatable{font-size:13px!important}[_nghost-%COMP%]  .p-card-body{padding:.8rem!important}[_nghost-%COMP%]  .maxHeight{height:100%!important}[_nghost-%COMP%]  .small-table{font-size:12px!important}"]});let n=s;return n})();var mi=[{path:"",component:mt}],ut=(()=>{let s=class s{};s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=T({type:s}),s.\u0275inj=x({imports:[G.forChild(mi),G]});let n=s;return n})();var _t=(()=>{class n extends Ce{pathId;ngOnInit(){this.pathId="url(#"+pe()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=te(n)))(i||n)}})();static \u0275cmp=H({type:n,selectors:[["ThLargeIcon"]],standalone:!0,features:[ie,oe],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M1.90909 6.36364H4.45455C4.96087 6.36364 5.44645 6.1625 5.80448 5.80448C6.1625 5.44645 6.36364 4.96087 6.36364 4.45455V1.90909C6.36364 1.40277 6.1625 0.917184 5.80448 0.55916C5.44645 0.201136 4.96087 0 4.45455 0H1.90909C1.40277 0 0.917184 0.201136 0.55916 0.55916C0.201136 0.917184 0 1.40277 0 1.90909V4.45455C0 4.96087 0.201136 5.44645 0.55916 5.80448C0.917184 6.1625 1.40277 6.36364 1.90909 6.36364ZM1.46154 1.46154C1.58041 1.34268 1.741 1.27492 1.90909 1.27273H4.45455C4.62264 1.27492 4.78322 1.34268 4.90209 1.46154C5.02096 1.58041 5.08871 1.741 5.09091 1.90909V4.45455C5.08871 4.62264 5.02096 4.78322 4.90209 4.90209C4.78322 5.02096 4.62264 5.08871 4.45455 5.09091H1.90909C1.741 5.08871 1.58041 5.02096 1.46154 4.90209C1.34268 4.78322 1.27492 4.62264 1.27273 4.45455V1.90909C1.27492 1.741 1.34268 1.58041 1.46154 1.46154ZM1.90909 14H4.45455C4.96087 14 5.44645 13.7989 5.80448 13.4408C6.1625 13.0828 6.36364 12.5972 6.36364 12.0909V9.54544C6.36364 9.03912 6.1625 8.55354 5.80448 8.19551C5.44645 7.83749 4.96087 7.63635 4.45455 7.63635H1.90909C1.40277 7.63635 0.917184 7.83749 0.55916 8.19551C0.201136 8.55354 0 9.03912 0 9.54544V12.0909C0 12.5972 0.201136 13.0828 0.55916 13.4408C0.917184 13.7989 1.40277 14 1.90909 14ZM1.46154 9.0979C1.58041 8.97903 1.741 8.91128 1.90909 8.90908H4.45455C4.62264 8.91128 4.78322 8.97903 4.90209 9.0979C5.02096 9.21677 5.08871 9.37735 5.09091 9.54544V12.0909C5.08871 12.259 5.02096 12.4196 4.90209 12.5384C4.78322 12.6573 4.62264 12.7251 4.45455 12.7273H1.90909C1.741 12.7251 1.58041 12.6573 1.46154 12.5384C1.34268 12.4196 1.27492 12.259 1.27273 12.0909V9.54544C1.27492 9.37735 1.34268 9.21677 1.46154 9.0979ZM12.0909 6.36364H9.54544C9.03912 6.36364 8.55354 6.1625 8.19551 5.80448C7.83749 5.44645 7.63635 4.96087 7.63635 4.45455V1.90909C7.63635 1.40277 7.83749 0.917184 8.19551 0.55916C8.55354 0.201136 9.03912 0 9.54544 0H12.0909C12.5972 0 13.0828 0.201136 13.4408 0.55916C13.7989 0.917184 14 1.40277 14 1.90909V4.45455C14 4.96087 13.7989 5.44645 13.4408 5.80448C13.0828 6.1625 12.5972 6.36364 12.0909 6.36364ZM9.54544 1.27273C9.37735 1.27492 9.21677 1.34268 9.0979 1.46154C8.97903 1.58041 8.91128 1.741 8.90908 1.90909V4.45455C8.91128 4.62264 8.97903 4.78322 9.0979 4.90209C9.21677 5.02096 9.37735 5.08871 9.54544 5.09091H12.0909C12.259 5.08871 12.4196 5.02096 12.5384 4.90209C12.6573 4.78322 12.7251 4.62264 12.7273 4.45455V1.90909C12.7251 1.741 12.6573 1.58041 12.5384 1.46154C12.4196 1.34268 12.259 1.27492 12.0909 1.27273H9.54544ZM9.54544 14H12.0909C12.5972 14 13.0828 13.7989 13.4408 13.4408C13.7989 13.0828 14 12.5972 14 12.0909V9.54544C14 9.03912 13.7989 8.55354 13.4408 8.19551C13.0828 7.83749 12.5972 7.63635 12.0909 7.63635H9.54544C9.03912 7.63635 8.55354 7.83749 8.19551 8.19551C7.83749 8.55354 7.63635 9.03912 7.63635 9.54544V12.0909C7.63635 12.5972 7.83749 13.0828 8.19551 13.4408C8.55354 13.7989 9.03912 14 9.54544 14ZM9.0979 9.0979C9.21677 8.97903 9.37735 8.91128 9.54544 8.90908H12.0909C12.259 8.91128 12.4196 8.97903 12.5384 9.0979C12.6573 9.21677 12.7251 9.37735 12.7273 9.54544V12.0909C12.7251 12.259 12.6573 12.4196 12.5384 12.5384C12.4196 12.6573 12.259 12.7251 12.0909 12.7273H9.54544C9.37735 12.7251 9.21677 12.6573 9.0979 12.5384C8.97903 12.4196 8.91128 12.259 8.90908 12.0909V9.54544C8.91128 9.37735 8.97903 9.21677 9.0979 9.0979Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,i){t&1&&(ee(),a(0,"svg",0)(1,"g"),v(2,"path",1),r(),a(3,"defs")(4,"clipPath",2),v(5,"rect",3),r()()()),t&2&&(A(i.getClassNames()),N("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),p(),N("clip-path",i.pathId),p(3),c("id",i.pathId))},encapsulation:2})}return n})();var bt=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=T({type:n});static \u0275inj=x({imports:[D,R,Re,ve,st,_t,R]})}return n})();var xt=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=T({type:n});static \u0275inj=x({imports:[D]})}return n})();var St=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=T({type:n});static \u0275inj=x({imports:[D,we,R,Ve,R]})}return n})();var so=(()=>{let s=class s{};s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=T({type:s}),s.\u0275inj=x({imports:[D,ge,he,ut,xe,Se,Ee,Fe,$e,ye,ot,lt,He,Ae,Je,qe,Ke,U,bt,Me,Ye,xt,ke,Pe,Z,Ie,pt,St]});let n=s;return n})();export{so as SellModule};
