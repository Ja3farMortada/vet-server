import{a as I}from"./chunk-CBLFYYYC.js";import{b as le,c as re}from"./chunk-5THTNNWZ.js";import"./chunk-R6ZEGCBG.js";import{b as ce}from"./chunk-S3UYYJDN.js";import{f as D,q as de}from"./chunk-O7Y33RWW.js";import"./chunk-RWK74YMD.js";import"./chunk-JLYTJQKU.js";import{b as X}from"./chunk-O2Z7APEW.js";import{a as Z,b as ee}from"./chunk-3SSLHLWI.js";import{j as pe,n as me}from"./chunk-SOXUPN2Q.js";import{Aa as n,Ab as $,Ba as A,C as k,Cb as q,Fa as b,Ga as u,Ha as f,J as B,Jc as te,K as v,Kc as ie,Lc as ne,Mc as oe,N as h,Na as W,O as N,Oa as G,P as w,Pa as Q,Qa as P,Ra as o,Rb as R,Sa as c,Ta as K,V as m,Va as j,W as d,Wa as F,Xa as z,_a as C,bd as se,cd as ae,ec as J,ha as r,hb as S,hc as V,ib as H,ic as T,oa as y,ra as E,ta as _,wa as M,wb as L,yc as Y,za as i,zb as U}from"./chunk-TC4DAS4S.js";var _e=(()=>{class e{constructor(){this.http=h(q),this.api=h(T),this.notificationService=h(V),this.host=this.api.host,this.expenses=y([]),this.loading_table=y(!1),this.user_balance=y({}),this.laoding_balance=y(!1),this.getExpenses()}getExpenses(){this.loading_table.set(!0),this.http.get(this.host+"/expense").subscribe({next:t=>{this.expenses.set(t)},error:t=>{console.log(t),this.notificationService.showError(t.error,"home"),this.loading_table.set(!1)},complete:()=>{this.loading_table.set(!1)}})}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ge=()=>[10,25,50],Ee=()=>["journal_number","journal_description","payment_date"],ue=()=>({width:"95vw"});function be(e,p){e&1&&(i(0,"tr")(1,"th"),o(2,"Expense #"),n(),i(3,"th"),o(4,"Description"),n(),i(5,"th"),o(6,"Datetime"),n(),i(7,"th"),o(8,"total"),n(),i(9,"th",23),o(10,"Options"),n()())}function Ce(e,p){if(e&1){let t=b();i(0,"p-button",26),u("onClick",function(){m(t);let l=f().$implicit,a=f();return d(a.openEditDialog(l))}),n()}}function ye(e,p){if(e&1){let t=b();i(0,"p-button",27),u("onClick",function(){m(t);let l=f().$implicit,a=f();return d(a.openEditHistoryDialog(l))}),n()}if(e&2){let t=f(2);_("loading",t.loadingEditHistory)}}function ve(e,p){if(e&1&&(i(0,"tr")(1,"td"),o(2),n(),i(3,"td"),o(4),n(),i(5,"td"),o(6),n(),i(7,"td"),o(8),S(9,"currency"),n(),i(10,"td"),E(11,Ce,1,0,"p-button",24),n(),i(12,"td"),E(13,ye,1,1,"p-button",25),n()()),e&2){let t=p.$implicit;r(2),c(t.journal_number),r(2),c(t.journal_description),r(2),c(t.payment_date),r(2),c(H(9,6,t.total_value)),r(3),_("ngIf",t.journal_number.substr(0,3)!="REC"),r(2),_("ngIf",t.updated_at)}}function we(e,p){e&1&&(i(0,"tr")(1,"td",28),o(2,"No Records Found!"),n()())}function Se(e,p){e&1&&(i(0,"tr")(1,"th"),o(2,"Created At"),n(),i(3,"th"),o(4,"Updated At"),n(),i(5,"th"),o(6,"Update Reason"),n(),i(7,"th"),o(8,"Old Value"),n()())}function He(e,p){if(e&1&&(i(0,"tr")(1,"td"),o(2),n(),i(3,"td"),o(4),n(),i(5,"td"),o(6),n(),i(7,"td"),o(8),S(9,"currency"),n()()),e&2){let t=p.$implicit;r(2),c(t.journal_date),r(2),c(t.updated_at),r(2),c(t.update_reason),r(2),K(" ",H(9,4,t.total_value)," ")}}function Ve(e,p){if(e&1&&(i(0,"p-table",29),E(1,Se,9,0,"ng-template",15)(2,He,10,6,"ng-template",16),n()),e&2){let t=f();_("value",t.editHistory)}}function Te(e,p){if(e&1){let t=b();i(0,"p-button",30),u("onClick",function(){m(t);let l=f();return d(l.editHistoryDialogVisible=!1)}),n()}}function De(e,p){e&1&&(i(0,"tr")(1,"th"),o(2,"Expense #"),n(),i(3,"th"),o(4,"Description"),n(),i(5,"th"),o(6,"Created At"),n(),i(7,"th"),o(8,"Deleted At"),n(),i(9,"th"),o(10,"Delete Reason"),n(),i(11,"th"),o(12,"total"),n()())}function Ie(e,p){if(e&1&&(i(0,"tr")(1,"td"),o(2),n(),i(3,"td"),o(4),n(),i(5,"td"),o(6),n(),i(7,"td"),o(8),n(),i(9,"td"),o(10),n(),i(11,"td"),o(12),S(13,"currency"),n()()),e&2){let t=p.$implicit;r(2),c(t.journal_number),r(2),c(t.journal_description),r(2),c(t.payment_date),r(2),c(t.deleted_at),r(2),c(t.delete_reason),r(2),c(H(13,6,t.total_value))}}function ke(e,p){if(e&1&&(i(0,"p-table",31),E(1,De,13,0,"ng-template",15)(2,Ie,14,8,"ng-template",16),n()),e&2){let t=f();_("value",t.deletedHistory)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",C(6,ge))("alwaysShowPaginator",!0)}}function Me(e,p){if(e&1){let t=b();i(0,"p-button",30),u("onClick",function(){m(t);let l=f();return d(l.deletedDialogVisible=!1)}),n()}}var fe=(()=>{class e{constructor(){this.userService=h(X),this.expensesService=h(_e),this.api=h(T),this.notification=h(V),this.expenses=this.expensesService.expenses,this.expenses_dialog_visible=!1,this.loading=this.expensesService.loading_table,this.loading_balance=this.expensesService.laoding_balance,this.dialog_mode="add",this.balance=this.expensesService.user_balance,this.userType=this.userService.userType,this.editHistoryDialogVisible=!1,this.loadingEditHistory=!1,this.deletedDialogVisible=!1,this.loadingGetDeleted=!1,this.deletedHistory=[]}addExpense(){this.dialog_mode="add",this.expenses_dialog_visible=!0}openEditDialog(t){this.dialog_mode="edit",this.selected_payment=t,this.expenses_dialog_visible=!0}onExpenseSumbitted(t){this.refetchExpenses()}closeDialog(){this.expenses_dialog_visible=!1}refetchExpenses(){this.expensesService.getExpenses()}refreshBalance(){}openEditHistoryDialog(t){this.loadingEditHistory=!0,this.api.get(`expense/edits/${t.journal_id}`).pipe(k(()=>{this.loadingEditHistory=!1})).subscribe({next:s=>{console.log(s),this.editHistoryDialogVisible=!0,this.editHistory=s}})}getDeletedExpenses(){this.loadingGetDeleted=!0,this.api.get("expense/deleted").pipe(k(()=>{this.loadingGetDeleted=!1})).subscribe({next:t=>{this.deletedDialogVisible=!0,this.deletedHistory=t}})}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275cmp=N({type:e,selectors:[["app-expenses-home"]],viewQuery:function(s,l){if(s&1&&W(D,5),s&2){let a;G(a=Q())&&(l.ct=a.first)}},decls:27,vars:30,consts:[["tableSearch",""],["ct",""],[1,"grid","m-1"],[1,"col-12"],[1,"col-12","grid"],[1,"col-7","md:col-2"],[1,"p-input-icon-left","w-full"],[1,"pi","pi-search"],["id","globalFilter","pInputText","","type","search","placeholder","Search ...",1,"p-inputtext-sm","w-full",3,"input","value"],[1,"col-5","md:col-2"],["label","Refresh","icon","pi pi-refresh","size","small","styleClass","w-full",3,"onClick","loading"],[1,"col-6","md:col-2"],["label","Add Expense","severity","success","icon","pi pi-plus","size","small","styleClass","w-full",3,"onClick"],["label","Deleted Expenses","severity","danger","icon","pi pi-history","size","small","styleClass","w-full",3,"onClick"],["dataKey","journal_id","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","loading","globalFilterFields","filterDelay"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"OnClose","OnSubmit","visible","selected_payment","dialog_mode"],["header","Edit History","position","top",3,"visibleChange","onHide","visible","modal","closable","maximizable"],["pTemplate","content"],["pTemplate","footer"],["header","Deleted Expenses","position","top",3,"visibleChange","onHide","visible","modal","closable","maximizable"],["colspan","2","width","10%"],["size","small","icon","fas fa-edit","severity","warning",3,"onClick",4,"ngIf"],["size","small","severity","help","icon","pi pi-history",3,"loading","onClick",4,"ngIf"],["size","small","icon","fas fa-edit","severity","warning",3,"onClick"],["size","small","severity","help","icon","pi pi-history",3,"onClick","loading"],["colspan","11"],["dataKey","record_id","styleClass","p-datatable-sm",3,"value"],["label","Close","icon","pi pi-times","severity","secondary","size","small",3,"onClick"],["dataKey","record_id","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator"]],template:function(s,l){if(s&1){let a=b();i(0,"div",2)(1,"div",3)(2,"p-card")(3,"div",4)(4,"div",5)(5,"span",6),A(6,"i",7),i(7,"input",8,0),u("input",function(g){m(a);let he=P(16);return d(he.filterGlobal(g.target.value,"contains"))}),n()()(),i(9,"div",9)(10,"p-button",10),u("onClick",function(){return m(a),d(l.refetchExpenses())}),n()(),i(11,"div",11)(12,"p-button",12),u("onClick",function(){return m(a),d(l.addExpense())}),n()(),i(13,"div",11)(14,"p-button",13),u("onClick",function(){return m(a),d(l.getDeletedExpenses())}),n()()(),i(15,"p-table",14,1),E(17,be,11,0,"ng-template",15)(18,ve,14,8,"ng-template",16)(19,we,3,0,"ng-template",17),n()()()(),i(20,"expenses-dialog",18),u("OnClose",function(){return m(a),d(l.closeDialog())})("OnSubmit",function(g){return m(a),d(l.onExpenseSumbitted(g))}),n(),i(21,"p-dialog",19),z("visibleChange",function(g){return m(a),F(l.editHistoryDialogVisible,g)||(l.editHistoryDialogVisible=g),d(g)}),u("onHide",function(){return m(a),d(l.editHistory=null)}),E(22,Ve,3,1,"ng-template",20)(23,Te,1,0,"ng-template",21),n(),i(24,"p-dialog",22),z("visibleChange",function(g){return m(a),F(l.deletedDialogVisible,g)||(l.deletedDialogVisible=g),d(g)}),u("onHide",function(){return m(a),d(l.deletedHistory=[])}),E(25,ke,3,7,"ng-template",20)(26,Me,1,0,"ng-template",21),n()}if(s&2){let a=P(16);r(7),_("value",a.filters.global==null?null:a.filters.global.value),r(3),_("loading",l.loading()),r(5),_("value",l.expenses())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",C(26,ge))("alwaysShowPaginator",!0)("loading",l.loading())("globalFilterFields",C(27,Ee))("filterDelay",0),r(5),_("visible",l.expenses_dialog_visible)("selected_payment",l.selected_payment)("dialog_mode",l.dialog_mode),r(),M(C(28,ue)),j("visible",l.editHistoryDialogVisible),_("modal",!0)("closable",!0)("maximizable",!0),r(3),M(C(29,ue)),j("visible",l.deletedDialogVisible),_("modal",!0)("closable",!0)("maximizable",!0)}},dependencies:[L,te,J,I,Z,D,ne,se,U]})}}return e})();var Pe=[{path:"",component:fe}],xe=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=w({type:e})}static{this.\u0275inj=v({imports:[R.forChild(Pe),R]})}}return e})();var vt=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=w({type:e})}static{this.\u0275inj=v({imports:[$,Y,xe,ie,I,ee,de,me,pe,ce,oe,le,re,ae]})}}return e})();export{vt as ExpensesModule};
