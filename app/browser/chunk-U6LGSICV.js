import{a as k}from"./chunk-IVDVMSXC.js";import{b as re,c as ae}from"./chunk-VKP2AKCV.js";import"./chunk-B2XT5LEY.js";import{b as _e}from"./chunk-JLRN67G7.js";import{f as I,q as ce}from"./chunk-GS7Z4KHG.js";import"./chunk-GS2HDMHU.js";import"./chunk-CPOYLKXI.js";import{b as Y}from"./chunk-BWBVWMZW.js";import{a as ee,b as te}from"./chunk-ASN6MEGG.js";import{j as me,n as de}from"./chunk-2OAYZYPU.js";import{Aa as i,Ab as q,Ba as W,C as P,Cb as J,Fa as C,Ga as g,Ha as x,J as N,Jc as ie,K as w,Kc as ne,Lc as oe,Mc as le,N as b,Na as G,O as A,Oa as Q,P as S,Pa as K,Qa as F,Ra as l,Rb as R,Sa as _,Ta as L,V as d,Va as M,W as c,Wa as z,Xa as O,_a as y,bd as se,cd as pe,ec as X,ha as s,hb as H,hc as T,ib as V,ic as D,oa as v,ra as E,ta as u,wa as j,wb as U,yc as Z,za as e,zb as $}from"./chunk-TB3GCOGJ.js";var ue=(()=>{let n=class n{constructor(){this.http=b(J),this.api=b(D),this.notificationService=b(T),this.host=this.api.host,this.expenses=v([]),this.loading_table=v(!1),this.user_balance=v({}),this.laoding_balance=v(!1),this.getExpenses()}getExpenses(){this.loading_table.set(!0),this.http.get(this.host+"/expense").subscribe({next:p=>{this.expenses.set(p)},error:p=>{console.log(p),this.notificationService.showError(p.error,"home"),this.loading_table.set(!1)},complete:()=>{this.loading_table.set(!1)}})}};n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var fe=()=>[10,25,50],Ee=()=>["journal_number","journal_description","payment_date"],ge=()=>({width:"95vw"});function Ce(t,n){t&1&&(e(0,"tr")(1,"th"),l(2,"Expense #"),i(),e(3,"th"),l(4,"Description"),i(),e(5,"th"),l(6,"Datetime"),i(),e(7,"th"),l(8,"total"),i(),e(9,"th",23),l(10,"Options"),i()())}function ye(t,n){if(t&1){let o=C();e(0,"p-button",26),g("onClick",function(){d(o);let a=x().$implicit,r=x();return c(r.openEditDialog(a))}),i()}}function ve(t,n){if(t&1){let o=C();e(0,"p-button",27),g("onClick",function(){d(o);let a=x().$implicit,r=x();return c(r.openEditHistoryDialog(a))}),i()}if(t&2){let o=x(2);u("loading",o.loadingEditHistory)}}function we(t,n){if(t&1&&(e(0,"tr")(1,"td"),l(2),i(),e(3,"td"),l(4),i(),e(5,"td"),l(6),i(),e(7,"td"),l(8),H(9,"currency"),i(),e(10,"td"),E(11,ye,1,0,"p-button",24),i(),e(12,"td"),E(13,ve,1,1,"p-button",25),i()()),t&2){let o=n.$implicit;s(2),_(o.journal_number),s(2),_(o.journal_description),s(2),_(o.payment_date),s(2),_(V(9,6,o.total_value)),s(3),u("ngIf",o.journal_number.substr(0,3)!="REC"),s(2),u("ngIf",o.updated_at)}}function Se(t,n){t&1&&(e(0,"tr")(1,"td",28),l(2,"No Records Found!"),i()())}function He(t,n){t&1&&(e(0,"tr")(1,"th"),l(2,"Created At"),i(),e(3,"th"),l(4,"Updated At"),i(),e(5,"th"),l(6,"Update Reason"),i(),e(7,"th"),l(8,"Old Value"),i()())}function Ve(t,n){if(t&1&&(e(0,"tr")(1,"td"),l(2),i(),e(3,"td"),l(4),i(),e(5,"td"),l(6),i(),e(7,"td"),l(8),H(9,"currency"),i()()),t&2){let o=n.$implicit;s(2),_(o.journal_date),s(2),_(o.updated_at),s(2),_(o.update_reason),s(2),L(" ",V(9,4,o.total_value)," ")}}function Te(t,n){if(t&1&&(e(0,"p-table",29),E(1,He,9,0,"ng-template",15)(2,Ve,10,6,"ng-template",16),i()),t&2){let o=x();u("value",o.editHistory)}}function De(t,n){if(t&1){let o=C();e(0,"p-button",30),g("onClick",function(){d(o);let a=x();return c(a.editHistoryDialogVisible=!1)}),i()}}function Ie(t,n){t&1&&(e(0,"tr")(1,"th"),l(2,"Expense #"),i(),e(3,"th"),l(4,"Description"),i(),e(5,"th"),l(6,"Created At"),i(),e(7,"th"),l(8,"Deleted At"),i(),e(9,"th"),l(10,"Delete Reason"),i(),e(11,"th"),l(12,"total"),i()())}function ke(t,n){if(t&1&&(e(0,"tr")(1,"td"),l(2),i(),e(3,"td"),l(4),i(),e(5,"td"),l(6),i(),e(7,"td"),l(8),i(),e(9,"td"),l(10),i(),e(11,"td"),l(12),H(13,"currency"),i()()),t&2){let o=n.$implicit;s(2),_(o.journal_number),s(2),_(o.journal_description),s(2),_(o.payment_date),s(2),_(o.deleted_at),s(2),_(o.delete_reason),s(2),_(V(13,6,o.total_value))}}function Pe(t,n){if(t&1&&(e(0,"p-table",31),E(1,Ie,13,0,"ng-template",15)(2,ke,14,8,"ng-template",16),i()),t&2){let o=x();u("value",o.deletedHistory)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",y(6,fe))("alwaysShowPaginator",!0)}}function je(t,n){if(t&1){let o=C();e(0,"p-button",30),g("onClick",function(){d(o);let a=x();return c(a.deletedDialogVisible=!1)}),i()}}var xe=(()=>{let n=class n{constructor(){this.userService=b(Y),this.expensesService=b(ue),this.api=b(D),this.notification=b(T),this.expenses=this.expensesService.expenses,this.expenses_dialog_visible=!1,this.loading=this.expensesService.loading_table,this.loading_balance=this.expensesService.laoding_balance,this.dialog_mode="add",this.balance=this.expensesService.user_balance,this.userType=this.userService.userType,this.editHistoryDialogVisible=!1,this.loadingEditHistory=!1,this.deletedDialogVisible=!1,this.loadingGetDeleted=!1,this.deletedHistory=[]}addExpense(){this.dialog_mode="add",this.expenses_dialog_visible=!0}openEditDialog(p){this.dialog_mode="edit",this.selected_payment=p,this.expenses_dialog_visible=!0}onExpenseSumbitted(p){this.refetchExpenses()}closeDialog(){this.expenses_dialog_visible=!1}refetchExpenses(){this.expensesService.getExpenses()}refreshBalance(){}openEditHistoryDialog(p){this.loadingEditHistory=!0,this.api.get(`expense/edits/${p.journal_id}`).pipe(P(()=>{this.loadingEditHistory=!1})).subscribe({next:a=>{console.log(a),this.editHistoryDialogVisible=!0,this.editHistory=a}})}getDeletedExpenses(){this.loadingGetDeleted=!0,this.api.get("expense/deleted").pipe(P(()=>{this.loadingGetDeleted=!1})).subscribe({next:p=>{this.deletedDialogVisible=!0,this.deletedHistory=p}})}};n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=A({type:n,selectors:[["app-expenses-home"]],viewQuery:function(a,r){if(a&1&&G(I,5),a&2){let m;Q(m=K())&&(r.ct=m.first)}},decls:27,vars:30,consts:[["tableSearch",""],["ct",""],[1,"grid","m-1"],[1,"col-12"],[1,"col-12","grid"],[1,"col-7","md:col-2"],[1,"p-input-icon-left","w-full"],[1,"pi","pi-search"],["id","globalFilter","pInputText","","type","search","placeholder","Search ...",1,"p-inputtext-sm","w-full",3,"input","value"],[1,"col-5","md:col-2"],["label","Refresh","icon","pi pi-refresh","size","small","styleClass","w-full",3,"onClick","loading"],[1,"col-6","md:col-2"],["label","Add Expense","severity","success","icon","pi pi-plus","size","small","styleClass","w-full",3,"onClick"],["label","Deleted Expenses","severity","danger","icon","pi pi-history","size","small","styleClass","w-full",3,"onClick"],["dataKey","journal_id","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","loading","globalFilterFields","filterDelay"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"OnClose","OnSubmit","visible","selected_payment","dialog_mode"],["header","Edit History","position","top",3,"visibleChange","onHide","visible","modal","closable","maximizable"],["pTemplate","content"],["pTemplate","footer"],["header","Deleted Expenses","position","top",3,"visibleChange","onHide","visible","modal","closable","maximizable"],["colspan","2","width","10%"],["size","small","icon","fas fa-edit","severity","warning",3,"onClick",4,"ngIf"],["size","small","severity","help","icon","pi pi-history",3,"loading","onClick",4,"ngIf"],["size","small","icon","fas fa-edit","severity","warning",3,"onClick"],["size","small","severity","help","icon","pi pi-history",3,"onClick","loading"],["colspan","11"],["dataKey","record_id","styleClass","p-datatable-sm",3,"value"],["label","Close","icon","pi pi-times","severity","secondary","size","small",3,"onClick"],["dataKey","record_id","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator"]],template:function(a,r){if(a&1){let m=C();e(0,"div",2)(1,"div",3)(2,"p-card")(3,"div",4)(4,"div",5)(5,"span",6),W(6,"i",7),e(7,"input",8,0),g("input",function(f){d(m);let be=F(16);return c(be.filterGlobal(f.target.value,"contains"))}),i()()(),e(9,"div",9)(10,"p-button",10),g("onClick",function(){return d(m),c(r.refetchExpenses())}),i()(),e(11,"div",11)(12,"p-button",12),g("onClick",function(){return d(m),c(r.addExpense())}),i()(),e(13,"div",11)(14,"p-button",13),g("onClick",function(){return d(m),c(r.getDeletedExpenses())}),i()()(),e(15,"p-table",14,1),E(17,Ce,11,0,"ng-template",15)(18,we,14,8,"ng-template",16)(19,Se,3,0,"ng-template",17),i()()()(),e(20,"expenses-dialog",18),g("OnClose",function(){return d(m),c(r.closeDialog())})("OnSubmit",function(f){return d(m),c(r.onExpenseSumbitted(f))}),i(),e(21,"p-dialog",19),O("visibleChange",function(f){return d(m),z(r.editHistoryDialogVisible,f)||(r.editHistoryDialogVisible=f),c(f)}),g("onHide",function(){return d(m),c(r.editHistory=null)}),E(22,Te,3,1,"ng-template",20)(23,De,1,0,"ng-template",21),i(),e(24,"p-dialog",22),O("visibleChange",function(f){return d(m),z(r.deletedDialogVisible,f)||(r.deletedDialogVisible=f),c(f)}),g("onHide",function(){return d(m),c(r.deletedHistory=[])}),E(25,Pe,3,7,"ng-template",20)(26,je,1,0,"ng-template",21),i()}if(a&2){let m=F(16);s(7),u("value",m.filters.global==null?null:m.filters.global.value),s(3),u("loading",r.loading()),s(5),u("value",r.expenses())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",y(26,fe))("alwaysShowPaginator",!0)("loading",r.loading())("globalFilterFields",y(27,Ee))("filterDelay",0),s(5),u("visible",r.expenses_dialog_visible)("selected_payment",r.selected_payment)("dialog_mode",r.dialog_mode),s(),j(y(28,ge)),M("visible",r.editHistoryDialogVisible),u("modal",!0)("closable",!0)("maximizable",!0),s(3),j(y(29,ge)),M("visible",r.deletedDialogVisible),u("modal",!0)("closable",!0)("maximizable",!0)}},dependencies:[U,ie,X,k,ee,I,oe,se,$]});let t=n;return t})();var Fe=[{path:"",component:xe}],he=(()=>{let n=class n{};n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=S({type:n}),n.\u0275inj=w({imports:[R.forChild(Fe),R]});let t=n;return t})();var wt=(()=>{let n=class n{};n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=S({type:n}),n.\u0275inj=w({imports:[q,Z,he,ne,k,te,ce,de,me,_e,le,re,ae,pe]});let t=n;return t})();export{wt as ExpensesModule};
