import{a as Ae}from"./chunk-S3UUVLQY.js";import{a as ze}from"./chunk-BL7EVFPH.js";import{a as Ne,b as ct,c as mt,d as me}from"./chunk-IPQ5K35T.js";import{a as qe,c as ut}from"./chunk-6LDDQVHW.js";import{a as ue}from"./chunk-7OZEHJLB.js";import{b as de}from"./chunk-PYNHYYKQ.js";import{a as Le,b as dt}from"./chunk-TGHMFMSO.js";import{b as _t,d as ht}from"./chunk-2PZNHHJQ.js";import{a as We}from"./chunk-U6HO5JIF.js";import{a as Re}from"./chunk-SNRKMWUG.js";import{a as ce}from"./chunk-MLK4GACY.js";import"./chunk-PF3W22WE.js";import{a as $e}from"./chunk-RRGNP644.js";import{a as ie,b as pt}from"./chunk-IXKUCSOW.js";import{a as ae}from"./chunk-SSSRFTU7.js";import"./chunk-UCYY7PH3.js";import{a as Me,b as rt,d as q,i as Be,j as Oe,o as st}from"./chunk-IREPXSKQ.js";import{b as it}from"./chunk-TEKBZXEZ.js";import"./chunk-YNNEQVUH.js";import{b as at}from"./chunk-LHZK3NH5.js";import{c as L,d as nt,i as W,j as ot}from"./chunk-VBDHWICU.js";import{a as te,b as lt}from"./chunk-JPFKXQZP.js";import"./chunk-HAI3U7NO.js";import{a as xe,b as Fe}from"./chunk-IMWMAWVU.js";import{a as O,b as Ze}from"./chunk-JY42M3WA.js";import"./chunk-BDTGQIJB.js";import{$a as G,Aa as s,Ab as Ke,Ba as b,Cb as re,Fa as x,Ga as u,Ha as c,Hc as N,Ic as R,J as oe,Jc as et,K as we,Ka as Te,Kc as ee,Lc as tt,N as f,O as k,P as Ee,Ra as p,Rb as Qe,Sa as v,Sb as se,Ta as w,U as Ie,V as _,Va as I,W as h,Wa as T,Xa as P,Xb as He,_ as pe,_a as E,ab as Pe,ec as M,g as Se,ha as l,hb as C,hc as A,i as z,ib as S,jc as U,l as le,nc as B,oa as D,oc as Q,pc as K,qc as V,ra as y,rc as ke,sc as J,ta as m,tc as X,ub as De,uc as Z,vb as Ve,wa as $,wb as Y,xc as Je,yc as Xe,za as r,zb as F}from"./chunk-WLCZSOBW.js";var ne=(()=>{let a=class a{constructor(){this.http=f(re),this.apiService=f(se),this.notificationService=f(A),this.salesHistory=D([]),this.paymentsHistory=D([]),this.signal_loading=D(!1),this.moneyTransfersHistory=D([]),this.returnHistory=D([]),this.receiptsHistory=D([]),this.purchasesHistory=D([])}fetchSalesHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host}/history/sales/search`,t).subscribe({next:e=>{this.salesHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchPaymentHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host}/history/payment/search`,t).subscribe({next:e=>{this.paymentsHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchMoneyTransferHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host}/history/money-transfer/search`,t).subscribe({next:e=>{this.moneyTransfersHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchReturnHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host}/history/return/search`,t).subscribe({next:e=>{this.returnHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchPurchasesHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host}/history/purchase/search`,t).subscribe({next:e=>{this.purchasesHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchReceiptsHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host}/history/receipt/search`,t).subscribe({next:e=>{this.receiptsHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=oe({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();var Ct=Se(xe());var gt=(()=>{let a=class a{constructor(){this.http=f(re),this.api=f(se),this.notificationService=f(A),this.whatsappLoading=D(!1)}sendMessage(t){this.whatsappLoading.set(!0),this.http.post(`${this.api.host}/send-whatsapp`,t).subscribe({next:e=>{this.notificationService.showInfo(e.message,"home",!1),this.whatsappLoading.set(!1)},error:e=>{this.whatsappLoading.set(!1),this.notificationService.showError("Error sending whatsapp!","home")}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=oe({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();var ft=(()=>{let a=class a{constructor(){this.apiService=f(se),this.http=f(re),this.notificationService=f(A),this.customersService=f(ae),this.host=this.apiService.host,this.currentInvoice=D({}),this.signal_submited=D(!1),this.signal_submit_loading=D(!1),this.action_status$=new le(""),this.selectedCustomerLatestItems=new le([])}chcekout(t,e){this.signal_submited.set(!0),this.signal_submit_loading.set(!0),this.http.put(`${this.apiService.host}/sell-orders`,t).subscribe({next:o=>{this.notificationService.showSuccess("Invoice Updated","home")},error:o=>{this.notificationService.showError(o.error.message,"home"),this.signal_submited.set(!1),this.signal_submit_loading.set(!1)},complete:()=>{e.getItems(),this.signal_submited.set(!1),this.signal_submit_loading.set(!1),this.action_status$.next("UPDATE"),this.customersService.getCustomerTotalBalance(t.customer_id)}})}returnCheckout(t,e){this.signal_submited.set(!0),this.signal_submit_loading.set(!0),this.http.put(`${this.apiService.host}/return`,t).subscribe({next:o=>{this.notificationService.showSuccess("Invoice Updated","home")},error:o=>{this.notificationService.showError(o.error.message,"home"),this.signal_submited.set(!1),this.signal_submit_loading.set(!1)},complete:()=>{e.getItems(),this.signal_submited.set(!1),this.signal_submit_loading.set(!1),this.action_status$.next("UPDATE"),this.customersService.getCustomerTotalBalance(t.customer_id)}})}deleteInvoice(t,e){let o=t.order_id;console.log(o),this.signal_submited.set(!0),this.http.delete(`${this.host}/sell-orders/${o}`).subscribe({next:d=>{this.notificationService.showSuccess(d.message,"home")},error:d=>{this.notificationService.handleError(d.error,"home"),this.signal_submited.set(!1)},complete:()=>{e.getItems(),this.signal_submited.set(!1),this.action_status$.next("DELETE"),this.customersService.getCustomerTotalBalance(t.customer_id)}})}returnDeleteInvoice(t,e){let o=t.order_id;this.signal_submited.set(!0),this.http.delete(`${this.host}/return/${o}`).subscribe({next:d=>{this.notificationService.showSuccess(d.message,"home")},error:d=>{this.notificationService.handleError(d.error,"home"),this.signal_submited.set(!1)},complete:()=>{e.getItems(),this.signal_submited.set(!1),this.action_status$.next("DELETE"),this.customersService.getCustomerTotalBalance(t.customer_id)}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=oe({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();var yt=Se(xe());var Rt=()=>({width:"95vw",height:"75vh"}),Lt=()=>({width:"65vw"}),Wt=()=>({"1199px":"75vw","575px":"95vw"}),qt=()=>({standalone:!0}),vt=n=>({invalid:n}),zt=(n,a)=>({"text-red-500":n,"text-orange-500":a}),$t=n=>({"text-red-500":n}),At=n=>({selected:n});function jt(n,a){n&1&&(r(0,"tr")(1,"th",27),p(2,"Barcode"),s(),r(3,"th",28),p(4,"Description"),s(),r(5,"th",29),p(6,"Expiry Date"),s(),r(7,"th",30),p(8,"Unit"),s(),r(9,"th",31),p(10,"Qty"),s(),r(11,"th",30),p(12,"Total"),s(),r(13,"th",31),p(14,"Del?"),s()())}function Gt(n,a){if(n&1){let i=x();r(0,"p-inputNumber",38),P("ngModelChange",function(e){_(i);let o=c().$implicit;return T(o.unit_price,e)||(o.unit_price=e),h(e)}),u("ngModelChange",function(){_(i);let e=c().$implicit,o=c(2);return h(o.setPrice(e))})("onFocus",function(e){_(i);let o=c(3);return h(o.select(e.target))}),s()}if(n&2){let i=c().$implicit;I("ngModel",i.unit_price),m("maxFractionDigits",2)("min",0)}}function Yt(n,a){n&1&&b(0,"i",41)}function Ut(n,a){if(n&1&&(r(0,"span",39),p(1),C(2,"currency"),r(3,"span"),y(4,Yt,1,0,"i",40),s()()),n&2){let i=c().$implicit,t=c(2);m("ngClass",Pe(5,zt,!i.unit_price,t.getPriceWarining(i))),l(),v(S(2,3,i.unit_price)),l(3),m("ngIf",t.getPriceWarining(i))}}function Qt(n,a){if(n&1){let i=x();r(0,"p-inputNumber",42),P("ngModelChange",function(e){_(i);let o=c().$implicit;return T(o.quantity,e)||(o.quantity=e),h(e)}),u("onFocus",function(e){_(i);let o=c(3);return h(o.select(e.target))})("ngModelChange",function(){_(i);let e=c().$implicit,o=c(2);return h(o.setQty(e))}),s()}if(n&2){let i=c().$implicit;I("ngModel",i.quantity)}}function Kt(n,a){if(n&1&&(r(0,"span",39),p(1),s()),n&2){let i=c().$implicit;m("ngClass",G(2,$t,!i.quantity)),l(),v(i.quantity)}}function Jt(n,a){if(n&1){let i=x();r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),s(),r(5,"td"),p(6),s(),r(7,"td",32)(8,"p-cellEditor"),y(9,Gt,1,3,"ng-template",33)(10,Ut,5,8,"ng-template",34),s()(),r(11,"td",35)(12,"p-cellEditor"),y(13,Qt,1,1,"ng-template",33)(14,Kt,2,4,"ng-template",34),s()(),r(15,"td"),p(16),C(17,"currency"),s(),r(18,"td",36),u("click",function(){let e=_(i).rowIndex,o=c(2);return h(o.removeRow(e))}),b(19,"i",37),s()()}if(n&2){let i=a.$implicit;l(2),v(i.barcode||"---"),l(2),v(i.product_name),l(2),v(i.expiry_date||"---"),l(),m("pEditableColumn",i.unit_price)("ngClass",G(10,vt,!i.unit_price)),l(4),m("pEditableColumn",i.quantity)("ngClass",G(12,vt,!i.quantity)),l(5),w(" ",S(17,8,i.unit_price*i.quantity)," ")}}function Xt(n,a){if(n&1&&(r(0,"h4",44),p(1),s()),n&2){let i=c(3);l(),w(" Total units: ",i.invoiceTotal.total_qty," ")}}function Zt(n,a){if(n&1&&y(0,Xt,2,1,"h4",43),n&2){let i=c(2);m("ngIf",i.invoiceTotal.total_qty)}}function ei(n,a){n&1&&(r(0,"tr",45)(1,"td",46),p(2,"No data yet!"),s()())}function ti(n,a){if(n&1){let i=x();r(0,"p-card",8)(1,"div",9)(2,"div",10)(3,"div",11),b(4,"div",12),r(5,"label"),p(6,"Invoice Date"),s(),r(7,"p-calendar",13),P("ngModelChange",function(e){_(i);let o=c();return T(o.invoice_date,e)||(o.invoice_date=e),h(e)}),s()()(),r(8,"div",10)(9,"div",12)(10,"label",14),p(11,"Customer"),s(),r(12,"p-dropdown",15),P("ngModelChange",function(e){_(i);let o=c();return T(o.customer_id,e)||(o.customer_id=e),h(e)}),u("onChange",function(e){_(i);let o=c();return h(o.customerChange(e.value))}),s()()(),r(13,"div",16)(14,"h3",17),p(15),C(16,"currency"),s(),r(17,"h3",18),p(18),C(19,"lira"),s()()(),r(20,"div",9)(21,"div",19)(22,"p-table",20,0),y(24,jt,15,0,"ng-template",21)(25,Jt,20,14,"ng-template",3)(26,Zt,1,1,"ng-template",22)(27,ei,3,0,"ng-template",23),s()(),r(28,"div",24)(29,"p-autoComplete",25,1),P("ngModelChange",function(e){_(i);let o=c();return T(o.search_product,e)||(o.search_product=e),h(e)}),u("completeMethod",function(e){_(i);let o=c();return h(o.searchItem(e))})("onKeyUp",function(e){_(i);let o=c();return h(o.submitInvoiceInput(e))}),s(),r(31,"button",26),u("click",function(){_(i);let e=c();return h(e.openProductsDialog())}),s()()()()}if(n&2){let i=c();l(7),I("ngModel",i.invoice_date),m("ngModelOptions",E(23,qt))("readonlyInput",!0)("showIcon",!0)("iconDisplay","input")("showTime",!0),l(5),I("ngModel",i.customer_id),m("options",i.customers)("filter",!0)("showClear",!0),l(3),w(" USD: ",S(16,19,i.invoiceTotal.total_dollar)," "),l(3),w(" LBP: ",S(19,21,i.invoiceTotal.total_dollar*i.invoice.exchange_rate)," "),l(4),Te("scrollHeight",i.vh),m("value",i.order_items)("scrollable",!0),l(7),I("ngModel",i.search_product),m("suggestions",i.matching_products)("delay",150)("autofocus",!0)}}function ii(n,a){if(n&1){let i=x();r(0,"p-button",50),u("click",function(){_(i);let e=c(2);return h(e.deleteInvoice())}),s()}if(n&2){let i=c(2);m("disabled",i.submitted())}}function ni(n,a){if(n&1){let i=x();y(0,ii,1,1,"p-button",47),r(1,"p-button",48),u("click",function(){_(i);let e=c();return h(e.closeEditDialog())}),s(),r(2,"p-button",49),u("click",function(){_(i);let e=c();return h(e.submitEditInvoice())}),s()}if(n&2){let i=c();m("ngIf",i.userPermissions().delete_invoice),l(),m("disabled",i.submitted()),l(),m("loading",i.submitted())("disabled",i.order_items.length==0)}}function oi(n,a){if(n&1){let i=x();r(0,"div",52)(1,"div",53),u("click",function(){let e=_(i).$implicit,o=c(2);return h(o.selectedVariant=e)}),r(2,"p"),p(3),b(4,"br"),r(5,"small"),p(6),s()()()()}if(n&2){let i=a.$implicit,t=c(2);l(),m("ngClass",G(3,At,t.selectedVariant==i)),l(2),w(" ",i.expiry_date," "),l(3),w("Current qty: ",i.variant_quantity,"")}}function ri(n,a){if(n&1&&(r(0,"div",9),y(1,oi,7,5,"div",51),s()),n&2){let i=c();l(),m("ngForOf",i.productToAdd==null?null:i.productToAdd.variants_records)}}function si(n,a){if(n&1){let i=x();r(0,"p-button",54),u("onClick",function(){_(i);let e=c();return h(e.variantDialogVisible=!1)}),s(),r(1,"p-button",55),u("onClick",function(){_(i);let e=c();return h(e.submitVariant())}),s()}}var Ge=(()=>{let a=class a{constructor(){this.visible=!1,this.customers=[],this.return_invoice_edit=!1,this.onSubmit=new pe,this.onHide=new pe,this.stockService=f(Re),this.editInvoiceService=f(ft),this.authService=f(ce),this.confirmationService=f(He),this.notificationsService=f(A),this.sellService=f(mt),this.userPermissions=this.authService.userPermissions,this.submitted=this.editInvoiceService.signal_submited,this.form_error=!1,this.invoiceTotal=new Ne,this.order_items=[],this.customer_id=null,this.invoice_number="123",this.selected_price_type="latest",this.selectedCustomerLatestItems=[],this.productsDialogVisible=!1,this.subscriptions=new z,this.products=this.stockService.products,this.matching_products=[],this.priceTypes=Object.keys(ct),this.editDialogVisible=!1,this.vh="50vh",this.variantDialogVisible=!1,this.productToAdd=null,this.selectedVariant=null}ngOnInit(){this.subscriptions.add(this.editInvoiceService.action_status$.subscribe(t=>{(t==="UPDATE"||t==="DELETE")&&(this.onSubmit.emit({action:t}),this.editInvoiceService.action_status$.next(""),this.visible=!1)})),this.subscriptions.add(this.editInvoiceService.selectedCustomerLatestItems.subscribe(t=>{this.selectedCustomerLatestItems=t})),this.subscriptions.add(this.sellService.barcodeResponse.subscribe(t=>{t&&(this.addProduct(t),this.sellService.barcodeResponse.next(null))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(){this.visible&&this.invoice&&(this.invoice_date=(0,yt.default)(this.invoice.order_date).format("YYYY-MM-DD HH:mm"),this.invoice_number=this.invoice.invoice_number.substring(3,this.invoice.invoice_number.length),this.order_items=structuredClone(this.invoice.items),this.customer_id=this.invoice.customer_id,this.invoiceTotal.cost_dollar=this.invoice.total_cost,this.invoiceTotal.total_dollar=this.invoice.total_amount,this.customerChange(this.invoice.customer_id))}setPrice(t){t.unit_price?this.validateItems():this.form_error=!0,this.calculateTotal("edit")}setQty(t){t.quantity?this.validateItems():this.form_error=!0,this.calculateTotal("edit")}validateItems(){return this.order_items.find(e=>!e.unit_price||!e.quantity)?(this.form_error=!0,!0):(this.form_error=!1,!1)}addProduct(t){this.productToAdd=t,t.has_variants?this.variantDialogVisible=!0:this.addProductToInvoice(t)}addProductToInvoice(t,e=null){let o=this.order_items.find(d=>d.product_id===t.product_id&&d.variant_id===e?.variant_id);o?(o.quantity+=1,this.calculateTotal("edit")):(this.order_items.push({product_id:t.product_id,barcode:t.barcode,product_name:t.product_name,original_price:t.unit_price_usd,unit_cost:t.unit_cost_usd,unit_price:t.unit_price_usd,quantity:1,variant_id:e?.variant_id,expiry_date:e?.expiry_date,stock_management:t.stock_management}),this.calculateTotal("add"))}submitVariant(){this.addProductToInvoice(this.productToAdd,this.selectedVariant),this.variantDialogVisible=!1}resetVariantsDialog(){this.variantDialogVisible=!1,this.productToAdd=null,this.selectedVariant=null}submitInvoiceInput(t){t.key==="Enter"&&this.search_product&&(typeof this.search_product=="string"?this.submitBarcode(this.search_product):this.sellService.barcodeResponse.next(this.search_product),this.search_product=null)}submitBarcode(t){if(t){let e=-1,o=["*","+"];for(let H=0;H<o.length;H++)if(t.indexOf(o[H])!==-1){e=t.indexOf(o[H]);break}let d=t.substring(0,e)||1,g=parseInt(t.substring(e+1,t.length));e!=-1&&e!=0?(this.sellService.factor.set(parseInt(d)),this.sellService.submitBarcode(g)):this.sellService.submitBarcode(t)}}calculateTotal(t){let e=new Ne,o=this.order_items;return o.length>0&&(o.forEach(d=>{e.total_qty+=d.quantity,e.cost_dollar+=d.unit_cost*d.quantity,e.subtotal_dollar+=d.unit_price*d.quantity}),e.total_dollar=e.subtotal_dollar-e.discount_dollar),this.invoiceTotal=e,e}submitEditInvoice(){let t=this.validateItems();t?t&&this.notificationsService.showError("Please enter price for all items","home"):this.return_invoice_edit?this.editInvoiceService.returnCheckout({customer_id:this.customer_id,order_id:this.invoice.order_id,items:this.order_items,total_cost:this.invoiceTotal.cost_dollar,total_amount:this.invoiceTotal.total_dollar,order_datetime:this.invoice_date,invoice_number:this.invoice_number},this.stockService):this.editInvoiceService.chcekout({customer_id:this.customer_id,order_id:this.invoice.order_id,items:this.order_items,total_cost:this.invoiceTotal.cost_dollar,total_amount:this.invoiceTotal.total_dollar,order_datetime:this.invoice_date,invoice_number:this.invoice_number},this.stockService)}searchItem(t){let e=this.products(),o=[],d=t.query;for(let g=0;g<e.length;g++){let H=e[g];H.product_name.toLowerCase().indexOf(d.toLowerCase())>-1&&o.push(H)}this.matching_products=o}closeEditDialog(){this.visible=!1,this.onHide.emit(!1)}customerChange(t){}removeRow(t){this.order_items.splice(t,1),this.calculateTotal("remove")}openProductsDialog(){this.productsDialogVisible=!0}clearInvoice(){this.confirmationService.confirm({key:"home",message:'Are you sure that you want to clear invoice"?',header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.order_items=[],this.submitted.set(!1),this.invoiceTotal=new Ne}})}deleteInvoice(){this.confirmationService.confirm({key:"home",message:'Are you sure that you want to delete invoice"?',header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.return_invoice_edit?this.editInvoiceService.returnDeleteInvoice(this.invoice,this.stockService):this.editInvoiceService.deleteInvoice(this.invoice,this.stockService)}})}closeProductsDialog(){}assignSelectedProducts(t){this.productsDialogVisible=!1,t.forEach(e=>{this.addProduct(e)})}getPriceTypeLabel(t){return{unit_price_usd:"\u0645\u0641\u0631\u0642",whole_price_usd:"\u062C\u0645\u0644\u0629",grandwhole_price_usd:"\u062C\u0645\u0644\u0629 \u0627\u0644\u062C\u0645\u0644\u0629",latest:"\u0622\u062E\u0631 \u0633\u0639\u0631"}[t]}select(t){t.select()}getPriceWarining(t){if(!t.unit_price)return!1;let e=t.unit_cost||0,o=t.unit_price;return typeof e=="string"&&(e=parseFloat(e)),typeof o=="string"&&(o=parseFloat(o)),o<e}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=k({type:a,selectors:[["edit-invoice"]],inputs:{visible:"visible",invoice:"invoice",customers:"customers",return_invoice_edit:"return_invoice_edit"},outputs:{onSubmit:"onSubmit",onHide:"onHide"},features:[Ie],decls:7,vars:18,consts:[["invoiceTable",""],["barcodeInput",""],["header","Edit Invoice","position","top",3,"visibleChange","onHide","visible","modal","closable","maximizable"],["pTemplate","body"],["pTemplate","footer"],[3,"onHide","onSubmit","visible","products"],["position","top","header","Choose Variant","styleClass","p-fluid",3,"visibleChange","onHide","visible","modal","breakpoints","closeOnEscape","closable"],["pTemplate","content"],["styleClass","mt-2"],[1,"grid"],[1,"col-12","md:col-3","pt-0","pb-0"],[1,"field","mb-0"],[1,"flex","flex-column","gap-2"],["inputId","order_datetime","name","order_datetime","styleClass","p-inputtext-sm w-full","dateFormat","yy-mm-dd","size","small","appendTo","body",3,"ngModelChange","ngModel","ngModelOptions","readonlyInput","showIcon","iconDisplay","showTime"],["for","customer"],["styleClass","p-inputtext-sm","id","customer","appendTo","body","optionLabel","name","optionValue","account_id","placeholder","Select Customer","filterBy","name",3,"ngModelChange","onChange","ngModel","options","filter","showClear"],[1,"col-12","md:col-3","md:col-offset-3","text-center"],[1,"text-green-600","m-2"],[1,"text-primary","m-2"],[1,"col-12"],["dataKey","product_id","styleClass","p-datatable-sm p-datatable-gridlines","editMode","cell",3,"value","scrollable","scrollHeight"],["pTemplate","header"],["pTemplate","summary"],["pTemplate","emptymessage"],[1,"col-12","md:col-4"],["field","product_name","name","barcodeInput","placeholder","scan or search ...","spellcheck","false",1,"p-inputtext-sm",3,"ngModelChange","completeMethod","onKeyUp","ngModel","suggestions","delay","autofocus"],["pButton","","pRipple","","label","Multi Select","severity","warning","icon","pi pi-list",1,"p-button-sm","ml-2",3,"click"],["width","20%"],["width","35%"],["width","15%"],["width","10%"],["width","5%"],["pEditableColumnField","unit_price",3,"pEditableColumn","ngClass"],["pTemplate","input"],["pTemplate","output"],["pEditableColumnField","quantity",3,"pEditableColumn","ngClass"],[1,"danger-hover",3,"click"],[1,"pi","pi-trash"],["styleClass","input-align-center","step","0",1,"p-inputtext-sm","editable",3,"ngModelChange","onFocus","ngModel","maxFractionDigits","min"],[3,"ngClass"],["class","pi pi-exclamation-triangle ml-2",4,"ngIf"],[1,"pi","pi-exclamation-triangle","ml-2"],["min","0","step","0",1,"p-inputtext-sm","editable",3,"ngModelChange","onFocus","ngModel"],["class","text-center m-0",4,"ngIf"],[1,"text-center","m-0"],[1,"surface-300"],["colspan","9"],["label","Delete","icon","pi pi-trash","severity","danger","size","small","class","w-full mt-4 md:w-auto md:mt-0",3,"disabled","click",4,"ngIf"],["label","Cancel Edit","icon","pi pi-times","severity","secondary","size","small",1,"w-full","mt-2","md:w-auto","md:ml-2",3,"click","disabled"],["size","small","label","Submit Edit","icon","pi pi-check","severity","success","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"click","loading","disabled"],["label","Delete","icon","pi pi-trash","severity","danger","size","small",1,"w-full","mt-4","md:w-auto","md:mt-0",3,"click","disabled"],["class","col-12 md:col-3",4,"ngFor","ngForOf"],[1,"col-12","md:col-3"],[1,"dark-hover","shadow-2","p-3","text-center","border-round",3,"click","ngClass"],["pRipple","","size","small","label","Cancel","icon","pi pi-times","severity","secondary","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"onClick"],["pRipple","","size","small","label","Finish","icon","pi pi-check","severity","success","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"onClick"]],template:function(e,o){e&1&&(r(0,"p-dialog",2),P("visibleChange",function(g){return T(o.visible,g)||(o.visible=g),g}),u("onHide",function(){return o.closeEditDialog()}),y(1,ti,32,24,"ng-template",3)(2,ni,3,4,"ng-template",4),s(),r(3,"products-dialog",5),u("onHide",function(){return o.productsDialogVisible=!1})("onSubmit",function(g){return o.assignSelectedProducts(g)}),s(),r(4,"p-dialog",6),P("visibleChange",function(g){return T(o.variantDialogVisible,g)||(o.variantDialogVisible=g),g}),u("onHide",function(){return o.resetVariantsDialog()}),y(5,ri,2,1,"ng-template",7)(6,si,2,0,"ng-template",4),s()),e&2&&($(E(15,Rt)),I("visible",o.visible),m("modal",!0)("closable",!0)("maximizable",!0),l(3),m("visible",o.productsDialogVisible)("products",o.products),l(),$(E(16,Lt)),I("visible",o.variantDialogVisible),m("modal",!0)("breakpoints",E(17,Wt))("closeOnEscape",!1)("closable",!0))},dependencies:[De,Ve,Y,B,ke,de,q,M,Be,Oe,N,R,O,te,W,L,Me,Le,F,We],styles:["[_nghost-%COMP%]  .p-fieldset .p-fieldset-content{padding:.5rem}.editable[_ngcontent-%COMP%]{width:100%;height:28px}[_nghost-%COMP%]   .editable[_ngcontent-%COMP%]     span.p-inputnumber.p-component{width:100%}td[_ngcontent-%COMP%]:has(span.p-inputnumber.p-component){padding:0}td[_ngcontent-%COMP%]:has(.no-padding){padding:0}.input-align-center[_ngcontent-%COMP%], [_nghost-%COMP%]   .editable[_ngcontent-%COMP%]     span.p-inputnumber.p-component .p-inputnumber-input{text-align:center}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}.invalid[_ngcontent-%COMP%]{border-bottom:1px solid var(--red-500)!important}[_nghost-%COMP%]  .p-card-content{padding-top:0!important;padding-bottom:0!important}.selected[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}"]});let n=a;return n})();var ai=()=>[10,25,50],li=()=>({width:"95vw"});function pi(n,a){n&1&&(r(0,"tr")(1,"th"),p(2,"Invoice #"),s(),r(3,"th"),p(4,"Customer"),s(),r(5,"th"),p(6,"Datetime"),s(),r(7,"th"),p(8,"total"),s(),r(9,"th",19),p(10,"Options"),s()())}function ci(n,a){if(n&1){let i=x();r(0,"p-button",24),u("onClick",function(){_(i);let e=c().$implicit,o=c();return h(o.openEditDialog(e))}),s()}}function mi(n,a){if(n&1){let i=x();r(0,"p-button",25),u("onClick",function(){_(i);let e=c().$implicit,o=c();return h(o.sendWhatsapp(e))}),s()}if(n&2){let i=c(2);m("loading",i.whatsappLoading())}}function di(n,a){if(n&1){let i=x();r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),s(),r(5,"td"),p(6),s(),r(7,"td"),p(8),C(9,"currency"),s(),r(10,"td")(11,"p-button",20),u("onClick",function(){let e=_(i).$implicit,o=c();return h(o.showInvoiceDialog(e))}),s()(),r(12,"td")(13,"p-button",21),u("onClick",function(){let e=_(i).$implicit,o=c();return h(o.printInvoice(e))}),s()(),r(14,"td"),y(15,ci,1,0,"p-button",22),s(),r(16,"td"),y(17,mi,1,1,"p-button",23),s()()}if(n&2){let i=a.$implicit,t=c();l(2),v(i.invoice_number),l(2),v(i.customer_name||"---"),l(2),v(i.order_date),l(2),v(S(9,6,i.total_amount)),l(7),m("ngIf",t.userPermissions().edit_invoice),l(2),m("ngIf",i.customer_phone)}}function ui(n,a){n&1&&(r(0,"tr")(1,"td",26),p(2,"No Records Found!"),s()())}function _i(n,a){n&1&&(r(0,"th",34),p(1," Unit Cost "),s())}function hi(n,a){n&1&&(r(0,"th"),p(1,"Total Cost"),s())}function gi(n,a){if(n&1&&(r(0,"tr")(1,"th",29),p(2,"Barcode"),s(),r(3,"th",30),p(4,"Description"),s(),r(5,"th"),p(6,"Expiry Date"),s(),r(7,"th"),p(8,"Original Price"),s(),r(9,"th"),p(10,"Sold Price"),s(),r(11,"th"),p(12,"Discount %"),s(),r(13,"th",31),p(14,"Qty"),s(),r(15,"th"),p(16,"Total Price"),s(),y(17,_i,2,0,"th",32)(18,hi,2,0,"th",33),s()),n&2){let i=c(3);l(17),m("ngIf",i.userPermissions().show_cost),l(),m("ngIf",i.userPermissions().show_cost)}}function fi(n,a){if(n&1&&(r(0,"td",34),p(1),C(2,"currency"),s()),n&2){let i=c().$implicit;l(),w(" ",S(2,1,i.unit_cost)," ")}}function vi(n,a){if(n&1&&(r(0,"td"),p(1),C(2,"currency"),s()),n&2){let i=c().$implicit;l(),w(" ",S(2,1,i.unit_cost*i.quantity)," ")}}function yi(n,a){if(n&1&&(r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),s(),r(5,"td"),p(6),s(),r(7,"td"),p(8),C(9,"currency"),s(),r(10,"td"),p(11),C(12,"currency"),s(),r(13,"td"),p(14),s(),r(15,"td"),p(16),s(),r(17,"td"),p(18),C(19,"currency"),s(),y(20,fi,3,3,"td",32)(21,vi,3,3,"td",33),s()),n&2){let i=a.$implicit,t=c(3);l(2),v(i.barcode||"---"),l(2),v(i.product_name),l(2),v(i.expiry_date||"---"),l(2),v(S(9,10,i.original_price)),l(3),w(" ",S(12,12,i.unit_price)," "),l(3),w("",i.discount_percentage,"%"),l(2),v(i.quantity),l(2),w(" ",S(19,14,i.total_price)," "),l(2),m("ngIf",t.userPermissions().show_cost),l(),m("ngIf",t.userPermissions().show_cost)}}function bi(n,a){n&1&&b(0,"td",34)}function Ci(n,a){if(n&1&&(r(0,"td"),p(1),C(2,"currency"),s()),n&2){let i=c(4);l(),w(" ",S(2,1,i.selectedInvoiceTotals.totalCost)," ")}}function Si(n,a){if(n&1&&(r(0,"tr"),b(1,"td")(2,"td")(3,"td")(4,"td")(5,"td")(6,"td"),r(7,"td"),p(8),s(),r(9,"td"),p(10),C(11,"currency"),s(),y(12,bi,1,0,"td",32)(13,Ci,3,3,"td",33),s()),n&2){let i=c(3);l(8),v(i.selectedInvoiceTotals.totalQty),l(2),w(" ",S(11,4,i.selectedInvoiceTotals.totalPrice)," "),l(2),m("ngIf",i.userPermissions().show_cost),l(),m("ngIf",i.userPermissions().show_cost)}}function xi(n,a){if(n&1&&(r(0,"p-table",28),y(1,gi,19,2,"ng-template",12)(2,yi,22,16,"ng-template",13)(3,Si,14,6,"ng-template",17),s()),n&2){let i=c(2);m("value",i.invoiceItems)}}function wi(n,a){if(n&1&&y(0,xi,4,1,"p-table",27),n&2){let i=c();m("ngIf",i.invoiceItems.length!=0)}}function Ei(n,a){if(n&1){let i=x();r(0,"button",35),u("click",function(){_(i);let e=c();return h(e.hideInvoiceDialog())}),s()}}var St=(()=>{let a=class a{constructor(){this.customerService=f(ae),this.historyService=f(ne),this.decimalService=f(me),this.printService=f(ze),this.authService=f(ce),this.whatsappService=f(gt),this.userPermissions=this.authService.userPermissions,this.customers=this.customerService.customers,this.detailsDialogVisible=!1,this.editDialogVisible=!1,this.selectedInvoiceTotals={totalQty:0,totalPrice:0,totalCost:0},this.subscriptions=new z,this.salesHistory=this.historyService.salesHistory,this.loading=this.historyService.signal_loading,this.searchForm=new K({invoice_number:new V(null),customer_id:new V(null),invoice_date:new V(null)}),this.whatsappLoading=this.whatsappService.whatsappLoading}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}submitSearch(){this.searchForm.value.invoice_date&&(this.searchForm.value.invoice_date=(0,Ct.default)(this.searchForm.value.invoice_date).format("YYYY-MM-DD")),this.historyService.fetchSalesHistory(this.searchForm.value)}resetSearch(){this.searchForm.reset(),this.historyService.fetchSalesHistory(null)}showInvoiceDialog(t){this.invoiceItems=t.items,this.invoiceItems.forEach(e=>{this.selectedInvoiceTotals.totalQty+=e.quantity,this.selectedInvoiceTotals.totalPrice=this.decimalService.add(this.selectedInvoiceTotals.totalPrice,e.total_price),this.selectedInvoiceTotals.totalCost=this.decimalService.add(this.selectedInvoiceTotals.totalCost,e.unit_cost*e.quantity)}),this.detailsDialogVisible=!0}openEditDialog(t){this.selectedInvoice=t,this.editDialogVisible=!0}closeEditDialog(){this.selectedInvoice=null,this.editDialogVisible=!1}hideInvoiceDialog(){this.detailsDialogVisible=!1,this.selectedInvoiceTotals={totalQty:0,totalPrice:0,totalCost:0}}submitEdit(t){this.historyService.fetchSalesHistory(this.searchForm.value)}printInvoice(t){this.printService.print(t,"sale")}sendWhatsapp(t){this.whatsappLoading.set(!0);let e={to:t.customer_phone,messageContents:[t.invoice_number,t.order_datetime,`${t.total_amount}$`]};this.whatsappService.sendMessage(e)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=k({type:a,selectors:[["app-sell-history"]],decls:23,vars:30,consts:[[1,"grid","m-1"],[1,"col-12"],["legend","Search Form",3,"toggleable"],[3,"ngSubmit","formGroup"],[1,"grid"],[1,"col-12","md:col-6","lg:col-3"],["formControlName","invoice_number","type","search","placeholder","Invoice #","pInputText","","spellcheck","false",1,"p-inputtext-sm","w-full"],["formControlName","customer_id","styleClass","p-inputtext-sm w-full","id","customer","appendTo","body","optionLabel","name","optionValue","account_id","placeholder","Select Customer","filterBy","name",3,"options","filter","showClear","autoOptionFocus"],["formControlName","invoice_date","styleClass","p-inputtext-sm w-full","dateFormat","yy-mm-dd","placeholder","Date",3,"showIcon","showClear","readonlyInput","showButtonBar"],["type","submit","label","search","icon","pi pi-search","pRipple","","size","small","severity","success",1,"mr-2",3,"loading"],["icon","pi pi-times","label","Clear","styleClass","p-button-primary p-button-sm","severity","danger",3,"onClick","disabled"],["dataKey","order_id","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Details","position","top",3,"visibleChange","onHide","visible","modal","closable","maximizable"],["pTemplate","content"],["pTemplate","footer"],[3,"onHide","onSubmit","visible","invoice","customers"],["colspan","4","width","10%"],["size","small","severity","info","icon","fas fa-eye",3,"onClick"],["size","small","severity","secondary","icon","pi pi-print",3,"onClick"],["size","small","icon","fas fa-edit","severity","warning",3,"onClick",4,"ngIf"],["size","small","severity","success","icon","pi pi-whatsapp",3,"loading","onClick",4,"ngIf"],["size","small","icon","fas fa-edit","severity","warning",3,"onClick"],["size","small","severity","success","icon","pi pi-whatsapp",3,"onClick","loading"],["colspan","11"],["dataKey","order_item_id","styleClass","p-datatable-sm",3,"value",4,"ngIf"],["dataKey","order_item_id","styleClass","p-datatable-sm",3,"value"],["width","15%"],["width","30%"],["width","5%"],["style","border-left: 1px #e5e7eb solid",4,"ngIf"],[4,"ngIf"],[2,"border-left","1px #e5e7eb solid"],["pButton","","pRipple","","label","Close","icon","pi pi-times",1,"p-button-secondary",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"p-card")(3,"p-fieldset",2)(4,"form",3),u("ngSubmit",function(){return o.submitSearch()}),r(5,"div",4)(6,"div",5),b(7,"input",6),s(),r(8,"div",5),b(9,"p-dropdown",7),s(),r(10,"div",5),b(11,"p-calendar",8),s(),r(12,"div",5),b(13,"p-button",9),r(14,"p-button",10),u("onClick",function(){return o.resetSearch()}),s()()()()(),r(15,"p-table",11),y(16,pi,11,0,"ng-template",12)(17,di,18,8,"ng-template",13)(18,ui,3,0,"ng-template",14),s()()()(),r(19,"p-dialog",15),P("visibleChange",function(g){return T(o.detailsDialogVisible,g)||(o.detailsDialogVisible=g),g}),u("onHide",function(){return o.hideInvoiceDialog()}),y(20,wi,1,1,"ng-template",16)(21,Ei,1,0,"ng-template",17),s(),r(22,"edit-invoice",18),u("onHide",function(){return o.closeEditDialog()})("onSubmit",function(g){return o.submitEdit(g)}),s()),e&2&&(l(3),m("toggleable",!0),l(),m("formGroup",o.searchForm),l(5),m("options",o.customers())("filter",!0)("showClear",!0)("autoOptionFocus",!1),l(2),m("showIcon",!1)("showClear",!0)("readonlyInput",!0)("showButtonBar",!0),l(2),m("loading",o.loading()),l(),m("disabled",o.loading()),l(),m("value",o.salesHistory())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",E(28,ai))("alwaysShowPaginator",!1)("loading",o.loading()),l(4),$(E(29,li)),I("visible",o.detailsDialogVisible),m("modal",!0)("closable",!0)("maximizable",!0),l(3),m("visible",o.editDialogVisible)("invoice",o.selectedInvoice)("customers",o.customers()))},dependencies:[Y,J,U,B,Q,X,Z,q,M,N,R,O,te,ee,W,L,ie,Ge,F]});let n=a;return n})();var xt=Se(xe());var Ii=()=>[10,25,50];function Ti(n,a){n&1&&(r(0,"tr")(1,"th"),p(2,"Payment #"),s(),r(3,"th"),p(4,"Customer"),s(),r(5,"th"),p(6,"Datetime"),s(),r(7,"th"),p(8,"total"),s(),r(9,"th",16),p(10,"Options"),s()())}function Pi(n,a){if(n&1){let i=x();r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),s(),r(5,"td"),p(6),s(),r(7,"td"),p(8),C(9,"currency"),s(),r(10,"td")(11,"button",17),u("click",function(){let e=_(i).$implicit,o=c();return h(o.printInvoice(e))}),s()(),r(12,"td")(13,"button",18),u("click",function(){let e=_(i).$implicit,o=c();return h(o.openEditDialog(e))}),s()()()}if(n&2){let i=a.$implicit;l(2),v(i.journal_number),l(2),v(i.partner_name),l(2),v(i.payment_date),l(2),v(S(9,4,i.total_value))}}function Di(n,a){n&1&&(r(0,"tr")(1,"td",19),p(2,"No Records Found!"),s()())}var wt=(()=>{let a=class a{constructor(){this.customerService=f(ae),this.historyService=f(ne),this.customers=this.customerService.customers,this.customersLoading=this.customerService.signal_tableLoading,this.detailsDialogVisible=!1,this.editDialogVisible=!1,this.paymentsHistory=this.historyService.paymentsHistory,this.loading=this.historyService.signal_loading,this.searchForm=new K({payment_date:new V(null),partner_id:new V(null),payment_number:new V(null)})}get partner_id(){return this.searchForm.get("partner_id")}submitSearch(){this.searchForm.value.payment_date&&(this.searchForm.value.payment_date=(0,xt.default)(this.searchForm.value.payment_date).format("YYYY-MM-DD")),this.historyService.fetchPaymentHistory(this.searchForm.value)}resetSearch(){this.searchForm.reset(),this.historyService.fetchPaymentHistory(null)}showInvoiceDialog(t){}printInvoice(t){}openEditDialog(t){this.selectedPayment=t,this.editDialogVisible=!0}hidePaymentDialog(){this.editDialogVisible=!1}getPaymentDilogResult(t){this.historyService.fetchPaymentHistory(this.searchForm.value)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=k({type:a,selectors:[["app-payment-history"]],decls:20,vars:23,consts:[[1,"grid","m-1"],[1,"col-12"],["legend","Search Form",3,"toggleable"],[3,"ngSubmit","formGroup"],[1,"grid"],[1,"col-12","md:col-6","lg:col-3"],["formControlName","payment_number","type","search","placeholder","Payment #","pInputText","","spellcheck","false",1,"p-inputtext-sm","w-full"],["formControlName","partner_id","styleClass","p-inputtext-sm w-full","id","customer","appendTo","body","optionLabel","name","optionValue","account_id","placeholder","Select Customer","filterBy","name",3,"options","loading","filter","showClear","autoOptionFocus"],["formControlName","payment_date","styleClass","p-inputtext-sm w-full","dateFormat","yy-mm-dd","placeholder","Date",3,"showIcon","showClear","readonlyInput"],["type","submit","label","search","icon","pi pi-search","pRipple","","size","small","severity","success",1,"mr-2",3,"loading"],["icon","pi pi-times","label","Clear","styleClass","p-button-primary p-button-sm","severity","danger",3,"onClick","disabled"],["dataKey","order_id","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["dialog_mode","edit",3,"onClose","onSubmit","visible","selected_payment","accounts"],["colspan","2","width","10%"],["size","small","pButton","","pRipple","","icon","pi pi-print","disabled","",1,"p-button-secondary",3,"click"],["size","small","pButton","","pRipple","","icon","fas fa-edit","severity","warning",3,"click"],["colspan","11"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"p-card")(3,"p-fieldset",2)(4,"form",3),u("ngSubmit",function(){return o.submitSearch()}),r(5,"div",4)(6,"div",5),b(7,"input",6),s(),r(8,"div",5),b(9,"p-dropdown",7),s(),r(10,"div",5),b(11,"p-calendar",8),s(),r(12,"div",5),b(13,"p-button",9),r(14,"p-button",10),u("onClick",function(){return o.resetSearch()}),s()()()()(),r(15,"p-table",11),y(16,Ti,11,0,"ng-template",12)(17,Pi,14,6,"ng-template",13)(18,Di,3,0,"ng-template",14),s()()()(),r(19,"payment-dialog",15),u("onClose",function(){return o.hidePaymentDialog()})("onSubmit",function(g){return o.getPaymentDilogResult(g)}),s()),e&2&&(l(3),m("toggleable",!0),l(),m("formGroup",o.searchForm),l(5),m("options",o.customers())("loading",o.customersLoading())("filter",!0)("showClear",!0)("autoOptionFocus",!1),l(2),m("showIcon",!1)("showClear",!0)("readonlyInput",!0),l(2),m("loading",o.loading()),l(),m("disabled",o.loading()),l(),m("value",o.paymentsHistory())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",E(22,Ii))("alwaysShowPaginator",!1)("loading",o.loading()),l(4),m("visible",o.editDialogVisible)("selected_payment",o.selectedPayment)("accounts",o.customers()))},dependencies:[J,U,B,Q,X,Z,q,M,N,R,O,ee,W,L,ie,$e,F]});let n=a;return n})();var Et=Se(xe());var Vi=()=>[10,25,50],Hi=()=>({width:"95vw"});function ki(n,a){n&1&&(r(0,"tr")(1,"th"),p(2,"Invoice #"),s(),r(3,"th"),p(4,"Customer"),s(),r(5,"th"),p(6,"Datetime"),s(),r(7,"th"),p(8,"total"),s(),r(9,"th",19),p(10,"Options"),s()())}function Fi(n,a){if(n&1){let i=x();r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),s(),r(5,"td"),p(6),s(),r(7,"td"),p(8),C(9,"currency"),s(),r(10,"td")(11,"button",20),u("click",function(){let e=_(i).$implicit,o=c();return h(o.showInvoiceDialog(e))}),s()(),r(12,"td")(13,"button",21),u("click",function(){let e=_(i).$implicit,o=c();return h(o.printInvoice(e))}),s()(),r(14,"td")(15,"button",22),u("click",function(){let e=_(i).$implicit,o=c();return h(o.openEditDialog(e))}),s()()()}if(n&2){let i=a.$implicit;l(2),v(i.invoice_number),l(2),v(i.customer_name),l(2),v(i.order_date),l(2),v(S(9,4,i.total_amount))}}function Mi(n,a){n&1&&(r(0,"tr")(1,"td",23),p(2,"No Records Found!"),s()())}function Bi(n,a){n&1&&(r(0,"tr")(1,"th",26),p(2,"Description"),s(),r(3,"th",27),p(4,"Unit Price"),s(),r(5,"th",28),p(6,"Qty"),s(),r(7,"th",27),p(8,"Total Price"),s()())}function Oi(n,a){if(n&1&&(r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),C(5,"currency"),s(),r(6,"td"),p(7),s(),r(8,"td"),p(9),C(10,"currency"),s()()),n&2){let i=a.$implicit;l(2),v(i.product_name),l(2),w(" ",S(5,4,i.unit_price)," "),l(3),v(i.quantity),l(2),w(" ",S(10,6,i.total_price)," ")}}function Ni(n,a){if(n&1&&(r(0,"tr"),b(1,"td")(2,"td"),r(3,"td"),p(4),s(),r(5,"td"),p(6),C(7,"currency"),s()()),n&2){let i=c(3);l(4),v(i.selectedInvoiceTotals.totalQty),l(2),w(" Total: ",S(7,2,i.selectedInvoiceTotals.totalPrice)," ")}}function Ri(n,a){if(n&1&&(r(0,"p-table",25),y(1,Bi,9,0,"ng-template",12)(2,Oi,11,8,"ng-template",13)(3,Ni,8,4,"ng-template",17),s()),n&2){let i=c(2);m("value",i.invoiceItems)}}function Li(n,a){if(n&1&&y(0,Ri,4,1,"p-table",24),n&2){let i=c();m("ngIf",i.invoiceItems.length!=0)}}function Wi(n,a){if(n&1){let i=x();r(0,"button",29),u("click",function(){_(i);let e=c();return h(e.hideInvoiceDialog())}),s()}}var It=(()=>{let a=class a{constructor(){this.customerService=f(ae),this.historyService=f(ne),this.decimalService=f(me),this.customers=this.customerService.customers,this.detailsDialogVisible=!1,this.editDialogVisible=!1,this.selectedInvoiceTotals={totalQty:0,totalPrice:0,totalCost:0},this.subscriptions=new z,this.returnHistory=this.historyService.returnHistory,this.loading=this.historyService.signal_loading,this.searchForm=new K({invoice_number:new V(null),customer_id:new V(null),invoice_date:new V(null)})}ngOnInit(){}ngOnDestroy(){this.subscriptions.unsubscribe()}submitSearch(){this.searchForm.value.invoice_date&&(this.searchForm.value.invoice_date=(0,Et.default)(this.searchForm.value.invoice_date).format("YYYY-MM-DD")),this.historyService.fetchReturnHistory(this.searchForm.value)}resetSearch(){this.searchForm.reset(),this.historyService.fetchReturnHistory(null)}showInvoiceDialog(t){this.invoiceItems=t.items,this.invoiceItems.forEach(e=>{this.selectedInvoiceTotals.totalQty+=e.quantity,this.selectedInvoiceTotals.totalPrice=this.decimalService.add(this.selectedInvoiceTotals.totalPrice,e.total_price),this.selectedInvoiceTotals.totalCost=this.decimalService.add(this.selectedInvoiceTotals.totalCost,e.unit_cost)}),this.detailsDialogVisible=!0}printInvoice(t){}printDelivery(t){}openEditDialog(t){console.log(t),this.selectedInvoice=t,this.editDialogVisible=!0}closeEditDialog(){this.selectedInvoice=null,this.editDialogVisible=!1}hideInvoiceDialog(){this.detailsDialogVisible=!1,this.selectedInvoiceTotals={totalQty:0,totalPrice:0,totalCost:0}}submitEdit(t){this.historyService.fetchReturnHistory(this.searchForm.value)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=k({type:a,selectors:[["app-sell-history"]],decls:23,vars:30,consts:[[1,"grid","m-1"],[1,"col-12"],["legend","Search Form",3,"toggleable"],[3,"ngSubmit","formGroup"],[1,"grid"],[1,"col-12","md:col-6","lg:col-3"],["formControlName","customer_id","styleClass","p-inputtext-sm w-full","id","customer","appendTo","body","optionLabel","name","optionValue","account_id","placeholder","Select Customer","filterBy","name",3,"options","filter","showClear","autoOptionFocus"],["formControlName","invoice_date","styleClass","p-inputtext-sm w-full","dateFormat","yy-mm-dd","placeholder","Date",3,"showIcon","showClear","readonlyInput"],["formControlName","invoice_number","type","search","placeholder","Invoice #","pInputText","","spellcheck","false",1,"p-inputtext-sm","w-full"],["type","submit","label","search","icon","pi pi-search","pRipple","","size","small","severity","success",1,"mr-2",3,"loading"],["icon","pi pi-times","label","Clear","styleClass","p-button-primary p-button-sm","severity","danger",3,"onClick","disabled"],["dataKey","order_id","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Details","position","top",3,"visibleChange","onHide","visible","modal","closable","maximizable"],["pTemplate","content"],["pTemplate","footer"],[3,"onHide","onSubmit","visible","invoice","customers","return_invoice_edit"],["colspan","3","width","10%"],["size","small","pButton","","pRipple","","icon","fas fa-eye",1,"p-button-success",3,"click"],["size","small","pButton","","pRipple","","icon","pi pi-print",1,"p-button-secondary",3,"click"],["size","small","pButton","","pRipple","","icon","fas fa-edit","severity","warning",3,"click"],["colspan","11"],["dataKey","order_item_id","styleClass","p-datatable-sm",3,"value",4,"ngIf"],["dataKey","order_item_id","styleClass","p-datatable-sm",3,"value"],["width","50%"],["width","20%"],["width","10%"],["pButton","","pRipple","","label","Close","icon","pi pi-times",1,"p-button-secondary",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"p-card")(3,"p-fieldset",2)(4,"form",3),u("ngSubmit",function(){return o.submitSearch()}),r(5,"div",4)(6,"div",5),b(7,"p-dropdown",6),s(),r(8,"div",5),b(9,"p-calendar",7),s(),r(10,"div",5),b(11,"input",8),s(),r(12,"div",5),b(13,"p-button",9),r(14,"p-button",10),u("onClick",function(){return o.resetSearch()}),s()()()()(),r(15,"p-table",11),y(16,ki,11,0,"ng-template",12)(17,Fi,16,6,"ng-template",13)(18,Mi,3,0,"ng-template",14),s()()()(),r(19,"p-dialog",15),P("visibleChange",function(g){return T(o.detailsDialogVisible,g)||(o.detailsDialogVisible=g),g}),u("onHide",function(){return o.hideInvoiceDialog()}),y(20,Li,1,1,"ng-template",16)(21,Wi,1,0,"ng-template",17),s(),r(22,"edit-invoice",18),u("onHide",function(){return o.closeEditDialog()})("onSubmit",function(g){return o.submitEdit(g)}),s()),e&2&&(l(3),m("toggleable",!0),l(),m("formGroup",o.searchForm),l(3),m("options",o.customers())("filter",!0)("showClear",!0)("autoOptionFocus",!1),l(2),m("showIcon",!1)("showClear",!0)("readonlyInput",!0),l(4),m("loading",o.loading()),l(),m("disabled",o.loading()),l(),m("value",o.returnHistory())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",E(28,Vi))("alwaysShowPaginator",!1)("loading",o.loading()),l(4),$(E(29,Hi)),I("visible",o.detailsDialogVisible),m("modal",!0)("closable",!0)("maximizable",!0),l(3),m("visible",o.editDialogVisible)("invoice",o.selectedInvoice)("customers",o.customers())("return_invoice_edit",!0))},dependencies:[Y,J,U,B,Q,X,Z,q,M,N,R,O,te,ee,W,L,ie,Ge,F]});let n=a;return n})();var Vt=Se(xe());var Tt=(()=>{let a=class a{constructor(){this.apiService=f(se),this.http=f(re),this.notificationService=f(A),this.suppliersService=f(ue),this.host=this.apiService.host,this.currentInvoice=D({}),this.signal_submited=D(!1),this.signal_submit_loading=D(!1),this.action_status$=new le(""),this.selectedSupplierLatestItems=new le([])}chcekout(t,e){this.signal_submited.set(!0),this.signal_submit_loading.set(!0),this.http.put(`${this.apiService.host}/supply`,t).subscribe({next:o=>{this.notificationService.showSuccess("Invoice Updated","home")},error:o=>{this.notificationService.showError(o.error.message,"home"),this.signal_submited.set(!1),this.signal_submit_loading.set(!1)},complete:()=>{e.getItems(),this.signal_submited.set(!1),this.signal_submit_loading.set(!1),this.action_status$.next("UPDATE"),this.suppliersService.getAccountTotalBalance(t.partner_id_fk)}})}returnCheckout(t,e){this.signal_submited.set(!0),this.signal_submit_loading.set(!0),this.http.put(`${this.apiService.host}/return`,t).subscribe({next:o=>{this.notificationService.showSuccess("Invoice Updated","home")},error:o=>{this.notificationService.showError(o.error.message,"home"),this.signal_submited.set(!1),this.signal_submit_loading.set(!1)},complete:()=>{e.getItems(),this.signal_submited.set(!1),this.signal_submit_loading.set(!1),this.action_status$.next("UPDATE"),this.suppliersService.getAccountTotalBalance(t.partner_id_fk)}})}deleteInvoice(t,e){let o=t.order_id;console.log(o),this.signal_submited.set(!0),this.http.delete(`${this.host}/supply/${o}`).subscribe({next:d=>{this.notificationService.showSuccess(d.message,"home")},error:d=>{this.notificationService.handleError(d.error,"home"),this.signal_submited.set(!1)},complete:()=>{e.getItems(),this.signal_submited.set(!1),this.action_status$.next("DELETE"),this.suppliersService.getAccountTotalBalance(t.partner_id_fk)}})}returnDeleteInvoice(t,e){let o=t.order_id;this.signal_submited.set(!0),this.http.delete(`${this.host}/return/${o}`).subscribe({next:d=>{this.notificationService.showSuccess(d.message,"home")},error:d=>{this.notificationService.handleError(d.error,"home"),this.signal_submited.set(!1)},complete:()=>{e.getItems(),this.signal_submited.set(!1),this.action_status$.next("DELETE"),this.suppliersService.getAccountTotalBalance(t.partner_id_fk)}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=oe({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();var qi=()=>({width:"95vw",height:"75vh"}),zi=()=>({width:"65vw"}),$i=()=>({"1199px":"75vw","575px":"95vw"}),Ai=()=>({standalone:!0}),ji=n=>({"ng-invalid ng-dirty":n}),Pt=n=>({invalid:n}),Gi=(n,a)=>({"text-red-500":n,"text-orange-500":a}),Yi=n=>({"text-red-500":n}),Ui=n=>({selected:n});function Qi(n,a){n&1&&(r(0,"small",29),p(1,"Supplier is required."),s())}function Ki(n,a){n&1&&(r(0,"tr")(1,"th",30),p(2,"Barcode"),s(),r(3,"th",31),p(4,"Description"),s(),r(5,"th",32),p(6,"Expiry Date"),s(),r(7,"th",33),p(8,"Unit"),s(),r(9,"th",34),p(10,"Qty"),s(),r(11,"th",33),p(12,"Total"),s(),r(13,"th",34),p(14,"Del?"),s()())}function Ji(n,a){if(n&1){let i=x();r(0,"p-inputNumber",41),P("ngModelChange",function(e){_(i);let o=c().$implicit;return T(o.unit_price,e)||(o.unit_price=e),h(e)}),u("ngModelChange",function(){_(i);let e=c().$implicit,o=c(2);return h(o.setPrice(e))})("onFocus",function(e){_(i);let o=c(3);return h(o.select(e.target))}),s()}if(n&2){let i=c().$implicit;I("ngModel",i.unit_price),m("maxFractionDigits",2)("min",0)}}function Xi(n,a){n&1&&b(0,"i",44)}function Zi(n,a){if(n&1&&(r(0,"span",42),p(1),C(2,"currency"),r(3,"span"),y(4,Xi,1,0,"i",43),s()()),n&2){let i=c().$implicit,t=c(2);m("ngClass",Pe(5,Gi,!i.unit_price,t.getPriceWarining(i))),l(),v(S(2,3,i.unit_price)),l(3),m("ngIf",t.getPriceWarining(i))}}function en(n,a){if(n&1){let i=x();r(0,"p-inputNumber",45),P("ngModelChange",function(e){_(i);let o=c().$implicit;return T(o.quantity,e)||(o.quantity=e),h(e)}),u("onFocus",function(e){_(i);let o=c(3);return h(o.select(e.target))})("ngModelChange",function(){_(i);let e=c().$implicit,o=c(2);return h(o.setQty(e))}),s()}if(n&2){let i=c().$implicit;I("ngModel",i.quantity)}}function tn(n,a){if(n&1&&(r(0,"span",42),p(1),s()),n&2){let i=c().$implicit;m("ngClass",G(2,Yi,!i.quantity)),l(),v(i.quantity)}}function nn(n,a){if(n&1){let i=x();r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),s(),r(5,"td"),p(6),s(),r(7,"td",35)(8,"p-cellEditor"),y(9,Ji,1,3,"ng-template",36)(10,Zi,5,8,"ng-template",37),s()(),r(11,"td",38)(12,"p-cellEditor"),y(13,en,1,1,"ng-template",36)(14,tn,2,4,"ng-template",37),s()(),r(15,"td"),p(16),C(17,"currency"),s(),r(18,"td",39),u("click",function(){let e=_(i).rowIndex,o=c(2);return h(o.removeRow(e))}),b(19,"i",40),s()()}if(n&2){let i=a.$implicit;l(2),v(i.barcode||"---"),l(2),v(i.product_name),l(2),v(i.expiry_date||"---"),l(),m("pEditableColumn",i.unit_price)("ngClass",G(10,Pt,!i.unit_price)),l(4),m("pEditableColumn",i.quantity)("ngClass",G(12,Pt,!i.quantity)),l(5),w(" ",S(17,8,i.unit_price*i.quantity)," ")}}function on(n,a){if(n&1&&(r(0,"h4",47),p(1),s()),n&2){let i=c(3);l(),w(" Total units: ",i.invoiceTotal.total_qty," ")}}function rn(n,a){if(n&1&&y(0,on,2,1,"h4",46),n&2){let i=c(2);m("ngIf",i.invoiceTotal.total_qty)}}function sn(n,a){n&1&&(r(0,"tr",48)(1,"td",49),p(2,"No data yet!"),s()())}function an(n,a){if(n&1){let i=x();r(0,"p-card",8)(1,"div",9)(2,"div",10)(3,"div",11),b(4,"div",12),r(5,"label"),p(6,"Invoice Date"),s(),r(7,"p-calendar",13),P("ngModelChange",function(e){_(i);let o=c();return T(o.invoice_date,e)||(o.invoice_date=e),h(e)}),s()()(),r(8,"div",10)(9,"div",12)(10,"label",14),p(11,"Supplier"),r(12,"span",15),p(13," *"),s()(),r(14,"p-dropdown",16),P("ngModelChange",function(e){_(i);let o=c();return T(o.supplier_id,e)||(o.supplier_id=e),h(e)}),u("onChange",function(e){_(i);let o=c();return h(o.supplierChange(e.value))}),s(),y(15,Qi,2,0,"small",17),s()(),r(16,"div",18)(17,"h3",19),p(18),C(19,"currency"),s(),r(20,"h3",20),p(21),C(22,"lira"),s()()(),r(23,"div",9)(24,"div",21)(25,"p-table",22,0),y(27,Ki,15,0,"ng-template",23)(28,nn,20,14,"ng-template",3)(29,rn,1,1,"ng-template",24)(30,sn,3,0,"ng-template",25),s()(),r(31,"div",26)(32,"p-autoComplete",27,1),P("ngModelChange",function(e){_(i);let o=c();return T(o.search_product,e)||(o.search_product=e),h(e)}),u("completeMethod",function(e){_(i);let o=c();return h(o.searchItem(e))})("onKeyUp",function(e){_(i);let o=c();return h(o.submitInvoiceInput(e))}),s(),r(34,"button",28),u("click",function(){_(i);let e=c();return h(e.openProductsDialog())}),s()()()()}if(n&2){let i=c();l(7),I("ngModel",i.invoice_date),m("ngModelOptions",E(25,Ai))("readonlyInput",!0)("showIcon",!0)("iconDisplay","input")("showTime",!0),l(7),I("ngModel",i.supplier_id),m("options",i.suppliers)("filter",!0)("showClear",!0)("ngClass",G(26,ji,!i.supplier_id)),l(),m("ngIf",!i.supplier_id),l(3),w(" USD: ",S(19,21,i.invoiceTotal.total_dollar)," "),l(3),w(" LBP: ",S(22,23,i.invoiceTotal.total_dollar*i.invoice.exchange_rate)," "),l(4),Te("scrollHeight",i.vh),m("value",i.invoice_items())("scrollable",!0),l(7),I("ngModel",i.search_product),m("suggestions",i.matching_products)("delay",150)("autofocus",!0)}}function ln(n,a){if(n&1){let i=x();r(0,"p-button",50),u("onClick",function(){_(i);let e=c();return h(e.deleteInvoice())}),s(),r(1,"p-button",51),u("onClick",function(){_(i);let e=c();return h(e.closeEditDialog())}),s(),r(2,"p-button",52),u("onClick",function(){_(i);let e=c();return h(e.submitEditInvoice())}),s()}if(n&2){let i=c();m("disabled",i.submitted()),l(),m("disabled",i.submitted()),l(),m("loading",i.submitted())("disabled",i.invoice_items().length==0)}}function pn(n,a){if(n&1){let i=x();r(0,"div",54)(1,"div",55),u("click",function(){let e=_(i).$implicit,o=c(2);return h(o.selectedVariant=e)}),r(2,"p"),p(3),b(4,"br"),r(5,"small"),p(6),s()()()()}if(n&2){let i=a.$implicit,t=c(2);l(),m("ngClass",G(3,Ui,t.selectedVariant==i)),l(2),w(" ",i.expiry_date," "),l(3),w("Current qty: ",i.variant_quantity,"")}}function cn(n,a){if(n&1&&(r(0,"div",9),y(1,pn,7,5,"div",53),s()),n&2){let i=c();l(),m("ngForOf",i.productToAdd==null?null:i.productToAdd.variants_records)}}function mn(n,a){if(n&1){let i=x();r(0,"p-button",56),u("onClick",function(){_(i);let e=c();return h(e.variantDialogVisible=!1)}),s(),r(1,"p-button",57),u("onClick",function(){_(i);let e=c();return h(e.submitVariant())}),s()}}var Dt=(()=>{let a=class a{constructor(){this.visible=!1,this.suppliers=[],this.return_invoice_edit=!1,this.onSubmit=new pe,this.onHide=new pe,this.stockService=f(Re),this.editInvoiceService=f(Tt),this.authService=f(ce),this.confirmationService=f(He),this.notificationsService=f(A),this.supplyService=f(ut),this.dateService=f(Fe),this.submitted=this.editInvoiceService.signal_submited,this.form_error=!1,this.invoiceTotal=new qe,this.supplier_id=null,this.invoice_number="123",this.invoice_items=D([]),this.selectedSupplierLatestItems=[],this.productsDialogVisible=!1,this.subscriptions=new z,this.products=this.stockService.products,this.matching_products=[],this.editDialogVisible=!1,this.vh="50vh",this.variantDialogVisible=!1,this.productToAdd=null,this.selectedVariant=null}ngOnInit(){this.subscriptions.add(this.editInvoiceService.action_status$.subscribe(t=>{(t==="UPDATE"||t==="DELETE")&&(this.onSubmit.emit({action:t}),this.editInvoiceService.action_status$.next(""),this.visible=!1)})),this.subscriptions.add(this.supplyService.barcodeResponse.subscribe(t=>{t&&(this.addProduct(t),this.supplyService.barcodeResponse.next(null))}))}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(){this.visible&&this.invoice&&(this.invoice_date=this.dateService.formatDate(this.invoice.order_datetime,"YYYY-MM-DD HH:mm"),this.invoice_number=this.invoice.invoice_number.substring(3,this.invoice.invoice_number.length),this.invoice_items.set(structuredClone(this.invoice.items)),this.supplier_id=this.invoice.partner_id_fk,this.invoiceTotal.cost_dollar=this.invoice.total_cost,this.invoiceTotal.total_dollar=this.invoice.total_cost,this.supplierChange(this.invoice.supplier_id))}setPrice(t){t.unit_price?this.validateItems():this.form_error=!0,this.calculateTotal("edit")}setQty(t){t.quantity?this.validateItems():this.form_error=!0,this.calculateTotal("edit")}validateItems(){return this.invoice_items().find(e=>!e.unit_price||!e.quantity)?(this.form_error=!0,!0):(this.form_error=!1,!1)}addProduct(t){this.productToAdd=t,t.has_variants?this.variantDialogVisible=!0:this.addProductToInvoice(t)}addProductToInvoice(t,e=null){let o=this.supplyService.factor(),d=structuredClone(this.invoice_items()),g=d.find(H=>H.product_id===t.product_id&&H.variant_id===e?.variant_id);g?g.quantity+=o:d.push({product_id:t.product_id,variant_id:e?.variant_id,expiry_date:e?.expiry_date,barcode:t.barcode,product_name:t.product_name,unit_cost:t.unit_cost_usd,unit_price:t.unit_cost_usd,quantity:o,unit_abbreviation:t.unit_abbreviation,product_unit_id:t.unit_id_fk}),this.invoice_items.set(d),this.supplyService.factor.set(1),this.calculateTotal("add")}submitVariant(){this.addProductToInvoice(this.productToAdd,this.selectedVariant),this.variantDialogVisible=!1}resetVariantsDialog(){this.variantDialogVisible=!1,this.productToAdd=null,this.selectedVariant=null}submitInvoiceInput(t){t.key==="Enter"&&this.search_product&&(typeof this.search_product=="string"?this.submitBarcode(this.search_product):this.supplyService.barcodeResponse.next(this.search_product),this.search_product=null)}submitBarcode(t){if(t){let e=-1,o=["*","+"];for(let H=0;H<o.length;H++)if(t.indexOf(o[H])!==-1){e=t.indexOf(o[H]);break}let d=t.substring(0,e)||1,g=parseInt(t.substring(e+1,t.length));e!=-1&&e!=0?(this.supplyService.factor.set(parseInt(d)),this.supplyService.submitBarcode(g)):this.supplyService.submitBarcode(t)}}calculateTotal(t){let e=new qe,o=this.invoice_items();return o.length>0&&(o.forEach(d=>{e.total_qty+=d.quantity,e.cost_dollar+=d.unit_cost*d.quantity,e.subtotal_dollar+=d.unit_price*d.quantity}),e.total_dollar=e.subtotal_dollar-e.discount_dollar),this.invoiceTotal=e,e}submitEditInvoice(){let t=this.validateItems();!t&&this.supplier_id?this.return_invoice_edit?this.editInvoiceService.returnCheckout({partner_id_fk:this.supplier_id,order_id:this.invoice.order_id,items:this.invoice_items(),total_cost:this.invoiceTotal.total_dollar,total_amount:this.invoiceTotal.total_dollar,order_datetime:this.invoice_date,invoice_number:this.invoice_number},this.stockService):this.editInvoiceService.chcekout({partner_id_fk:this.supplier_id,order_id:this.invoice.order_id,items:this.invoice_items(),total_cost:this.invoiceTotal.total_dollar,order_datetime:this.invoice_date,invoice_number:this.invoice_number},this.stockService):t&&this.notificationsService.showError("Please enter price for all items","home")}searchItem(t){let e=this.products(),o=[],d=t.query;for(let g=0;g<e.length;g++){let H=e[g];H.product_name.toLowerCase().indexOf(d.toLowerCase())>-1&&o.push(H)}this.matching_products=o}closeEditDialog(){this.visible=!1,this.onHide.emit(!1)}supplierChange(t){}removeRow(t){this.invoice_items().splice(t,1),this.calculateTotal("remove")}openProductsDialog(){this.productsDialogVisible=!0}clearInvoice(){this.confirmationService.confirm({key:"home",message:'Are you sure that you want to clear invoice"?',header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.invoice_items.set([]),this.submitted.set(!1),this.invoiceTotal=new qe}})}deleteInvoice(){this.confirmationService.confirm({key:"home",message:'Are you sure that you want to delete invoice"?',header:"Warning",icon:"pi pi-exclamation-triangle",acceptButtonStyleClass:"p-button-danger",rejectButtonStyleClass:"p-button-secondary",defaultFocus:"reject",accept:()=>{this.return_invoice_edit?this.editInvoiceService.returnDeleteInvoice(this.invoice,this.stockService):this.editInvoiceService.deleteInvoice(this.invoice,this.stockService)}})}closeProductsDialog(){}assignSelectedProducts(t){this.productsDialogVisible=!1,t.forEach(e=>{this.addProduct(e)})}getPriceTypeLabel(t){return{unit_price_usd:"\u0645\u0641\u0631\u0642",whole_price_usd:"\u062C\u0645\u0644\u0629",grandwhole_price_usd:"\u062C\u0645\u0644\u0629 \u0627\u0644\u062C\u0645\u0644\u0629",latest:"\u0622\u062E\u0631 \u0633\u0639\u0631"}[t]}select(t){t.select()}getPriceWarining(t){if(!t.unit_price)return!1;let e=t.unit_cost||0,o=t.unit_price;return typeof e=="string"&&(e=parseFloat(e)),typeof o=="string"&&(o=parseFloat(o)),o<e}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=k({type:a,selectors:[["edit-purchase"]],inputs:{visible:"visible",invoice:"invoice",suppliers:"suppliers",return_invoice_edit:"return_invoice_edit"},outputs:{onSubmit:"onSubmit",onHide:"onHide"},features:[Ie],decls:7,vars:18,consts:[["invoiceTable",""],["barcodeInput",""],["header","Edit Invoice","position","top",3,"visibleChange","onHide","visible","modal","closable","maximizable"],["pTemplate","body"],["pTemplate","footer"],["price","cost",3,"onHide","onSubmit","visible","products"],["position","top","header","Choose Variant","styleClass","p-fluid",3,"visibleChange","onHide","visible","modal","breakpoints","closeOnEscape","closable"],["pTemplate","content"],["styleClass","mt-2"],[1,"grid"],[1,"col-12","md:col-3","pt-0","pb-0"],[1,"field","mb-0"],[1,"flex","flex-column","gap-2"],["inputId","order_datetime","name","order_datetime","styleClass","p-inputtext-sm w-full","dateFormat","yy-mm-dd","size","small","appendTo","body",3,"ngModelChange","ngModel","ngModelOptions","readonlyInput","showIcon","iconDisplay","showTime"],["for","supplier"],[1,"text-red-500"],["styleClass","p-inputtext-sm","id","supplier","appendTo","body","optionLabel","name","optionValue","account_id","placeholder","Select Supplier","filterBy","name",3,"ngModelChange","onChange","ngModel","options","filter","showClear","ngClass"],["class","p-error",4,"ngIf"],[1,"col-12","md:col-3","md:col-offset-3","text-center"],[1,"text-green-600","m-2"],[1,"text-primary","m-2"],[1,"col-12"],["dataKey","product_id","styleClass","p-datatable-sm p-datatable-gridlines","editMode","cell",3,"value","scrollable","scrollHeight"],["pTemplate","header"],["pTemplate","summary"],["pTemplate","emptymessage"],[1,"col-12","md:col-4"],["field","product_name","name","barcodeInput","placeholder","scan or search ...","spellcheck","false",1,"p-inputtext-sm",3,"ngModelChange","completeMethod","onKeyUp","ngModel","suggestions","delay","autofocus"],["pButton","","pRipple","","label","Multi Select","severity","warning","icon","pi pi-list",1,"p-button-sm","ml-2",3,"click"],[1,"p-error"],["width","20%"],["width","35%"],["width","15%"],["width","10%"],["width","5%"],["pEditableColumnField","unit_price",3,"pEditableColumn","ngClass"],["pTemplate","input"],["pTemplate","output"],["pEditableColumnField","quantity",3,"pEditableColumn","ngClass"],[1,"danger-hover",3,"click"],[1,"pi","pi-trash"],["styleClass","input-align-center","step","0",1,"p-inputtext-sm","editable",3,"ngModelChange","onFocus","ngModel","maxFractionDigits","min"],[3,"ngClass"],["class","pi pi-exclamation-triangle ml-2",4,"ngIf"],[1,"pi","pi-exclamation-triangle","ml-2"],["min","0","step","0",1,"p-inputtext-sm","editable",3,"ngModelChange","onFocus","ngModel"],["class","text-center m-0",4,"ngIf"],[1,"text-center","m-0"],[1,"surface-300"],["colspan","9"],["label","Delete","icon","pi pi-trash","severity","danger","size","small",3,"onClick","disabled"],["label","Cancel Edit","icon","pi pi-times","severity","secondary","size","small",3,"onClick","disabled"],["label","Submit Edit","icon","pi pi-check","severity","success","size","small",3,"onClick","loading","disabled"],["class","col-12 md:col-3",4,"ngFor","ngForOf"],[1,"col-12","md:col-3"],[1,"dark-hover","shadow-2","p-3","text-center","border-round",3,"click","ngClass"],["size","small","label","Cancel","icon","pi pi-times","severity","secondary","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"onClick"],["size","small","label","Finish","icon","pi pi-check","severity","success","styleClass","w-full mt-2 md:w-auto md:ml-2",3,"onClick"]],template:function(e,o){e&1&&(r(0,"p-dialog",2),P("visibleChange",function(g){return T(o.visible,g)||(o.visible=g),g}),u("onHide",function(){return o.closeEditDialog()}),y(1,an,35,28,"ng-template",3)(2,ln,3,4,"ng-template",4),s(),r(3,"products-dialog",5),u("onHide",function(){return o.productsDialogVisible=!1})("onSubmit",function(g){return o.assignSelectedProducts(g)}),s(),r(4,"p-dialog",6),P("visibleChange",function(g){return T(o.variantDialogVisible,g)||(o.variantDialogVisible=g),g}),u("onHide",function(){return o.resetVariantsDialog()}),y(5,cn,2,1,"ng-template",7)(6,mn,2,0,"ng-template",4),s()),e&2&&($(E(15,qi)),I("visible",o.visible),m("modal",!0)("closable",!0)("maximizable",!0),l(3),m("visible",o.productsDialogVisible)("products",o.products),l(),$(E(16,zi)),I("visible",o.variantDialogVisible),m("modal",!0)("breakpoints",E(17,$i))("closeOnEscape",!1)("closable",!0))},dependencies:[De,Ve,Y,B,ke,de,q,M,Be,Oe,N,R,O,te,W,L,Me,Le,F,We],styles:["[_nghost-%COMP%]  .p-fieldset .p-fieldset-content{padding:.5rem}.editable[_ngcontent-%COMP%]{width:100%;height:28px}[_nghost-%COMP%]   .editable[_ngcontent-%COMP%]     span.p-inputnumber.p-component{width:100%}td[_ngcontent-%COMP%]:has(span.p-inputnumber.p-component){padding:0}td[_ngcontent-%COMP%]:has(.no-padding){padding:0}.input-align-center[_ngcontent-%COMP%], [_nghost-%COMP%]   .editable[_ngcontent-%COMP%]     span.p-inputnumber.p-component .p-inputnumber-input{text-align:center}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{appearance:textfield;-moz-appearance:textfield}.invalid[_ngcontent-%COMP%]{border-bottom:1px solid var(--red-500)!important}[_nghost-%COMP%]  .p-card-content{padding-top:0!important;padding-bottom:0!important}.selected[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}"]});let n=a;return n})();var un=()=>[10,25,50],_n=()=>({width:"95vw"});function hn(n,a){n&1&&(r(0,"tr")(1,"th"),p(2,"Invoice #"),s(),r(3,"th"),p(4,"Supplier"),s(),r(5,"th"),p(6,"Datetime"),s(),r(7,"th"),p(8,"total"),s(),r(9,"th",19),p(10,"Options"),s()())}function gn(n,a){if(n&1){let i=x();r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),s(),r(5,"td"),p(6),s(),r(7,"td"),p(8),C(9,"currency"),s(),r(10,"td")(11,"button",20),u("click",function(){let e=_(i).$implicit,o=c();return h(o.showInvoiceDialog(e))}),s()(),r(12,"td")(13,"button",21),u("click",function(){let e=_(i).$implicit,o=c();return h(o.openEditDialog(e))}),s()()()}if(n&2){let i=a.$implicit;l(2),v(i.invoice_number),l(2),v(i.supplier_name||"---"),l(2),v(i.order_date),l(2),v(S(9,4,i.total_cost))}}function fn(n,a){n&1&&(r(0,"tr")(1,"td",22),p(2,"No Records Found!"),s()())}function vn(n,a){n&1&&(r(0,"tr")(1,"th",25),p(2,"Barcode"),s(),r(3,"th",26),p(4,"Description"),s(),r(5,"th",25),p(6,"Expiry Date"),s(),r(7,"th",27),p(8,"Unit Price"),s(),r(9,"th",28),p(10,"Qty"),s(),r(11,"th",27),p(12,"Total Price"),s()())}function yn(n,a){if(n&1&&(r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),s(),r(5,"td"),p(6),s(),r(7,"td"),p(8),C(9,"currency"),s(),r(10,"td"),p(11),s(),r(12,"td"),p(13),C(14,"currency"),s()()),n&2){let i=a.$implicit;l(2),v(i.barcode||"---"),l(2),v(i.product_name),l(2),v(i.expiry_date||"---"),l(2),w(" ",S(9,6,i.unit_cost)," "),l(3),v(i.quantity),l(2),w(" ",S(14,8,i.unit_cost*i.quantity)," ")}}function bn(n,a){if(n&1&&(r(0,"tr"),b(1,"td")(2,"td")(3,"td")(4,"td"),r(5,"td"),p(6),s(),r(7,"td"),p(8),C(9,"currency"),s()()),n&2){let i=c(3);l(6),v(i.selectedInvoiceTotals.totalQty),l(2),w(" ",S(9,2,i.selectedInvoiceTotals.totalCost)," ")}}function Cn(n,a){if(n&1&&(r(0,"p-table",24),y(1,vn,13,0,"ng-template",12)(2,yn,15,10,"ng-template",13)(3,bn,10,4,"ng-template",17),s()),n&2){let i=c(2);m("value",i.invoiceItems)}}function Sn(n,a){if(n&1&&y(0,Cn,4,1,"p-table",23),n&2){let i=c();m("ngIf",i.invoiceItems.length!=0)}}function xn(n,a){if(n&1){let i=x();r(0,"p-button",29),u("onClick",function(){_(i);let e=c();return h(e.hideInvoiceDialog())}),s()}}var Ht=(()=>{let a=class a{constructor(){this.suppliersService=f(ue),this.historyService=f(ne),this.decimalService=f(me),this.printService=f(ze),this.suppliers=[],this.detailsDialogVisible=!1,this.editDialogVisible=!1,this.selectedInvoiceTotals={totalQty:0,totalCost:0},this.subscriptions=new z,this.purchasesHistory=this.historyService.purchasesHistory,this.loading=this.historyService.signal_loading,this.searchForm=new K({invoice_number:new V(null),supplier_id:new V(null),invoice_date:new V(null)})}ngOnInit(){this.subscriptions.add(this.suppliersService.suppliers$.subscribe(t=>{this.suppliers=t}))}ngOnDestroy(){this.subscriptions.unsubscribe()}submitSearch(){this.searchForm.value.invoice_date&&(this.searchForm.value.invoice_date=(0,Vt.default)(this.searchForm.value.invoice_date).format("YYYY-MM-DD")),this.historyService.fetchPurchasesHistory(this.searchForm.value)}resetSearch(){this.searchForm.reset(),this.historyService.fetchPurchasesHistory(null)}showInvoiceDialog(t){this.invoiceItems=t.items,this.invoiceItems.forEach(e=>{console.log(e),this.selectedInvoiceTotals.totalQty+=e.quantity,this.selectedInvoiceTotals.totalCost=this.decimalService.add(this.selectedInvoiceTotals.totalCost,e.unit_cost*e.quantity)}),this.detailsDialogVisible=!0}printDelivery(t){}openEditDialog(t){this.selectedInvoice=t,this.editDialogVisible=!0}closeEditDialog(){this.selectedInvoice=null,this.editDialogVisible=!1}hideInvoiceDialog(){this.detailsDialogVisible=!1,this.selectedInvoiceTotals={totalQty:0,totalCost:0}}submitEdit(t){this.historyService.fetchPurchasesHistory(this.searchForm.value)}printInvoice(t){this.printService.print(t,"sale")}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=k({type:a,selectors:[["app-supply-history"]],decls:23,vars:30,consts:[[1,"grid","m-1"],[1,"col-12"],["legend","Search Form",3,"toggleable"],[3,"ngSubmit","formGroup"],[1,"grid"],[1,"col-12","md:col-6","lg:col-3"],["formControlName","invoice_number","type","search","placeholder","Invoice #","pInputText","","spellcheck","false",1,"p-inputtext-sm","w-full"],["formControlName","supplier_id","styleClass","p-inputtext-sm w-full","id","supplier","appendTo","body","optionLabel","name","optionValue","account_id","placeholder","Select Supplier","filterBy","name",3,"options","filter","showClear","autoOptionFocus"],["formControlName","invoice_date","styleClass","p-inputtext-sm w-full","dateFormat","yy-mm-dd","placeholder","Date",3,"showIcon","showClear","readonlyInput","showButtonBar"],["type","submit","label","search","icon","pi pi-search","pRipple","","size","small","severity","success",1,"mr-2",3,"loading"],["icon","pi pi-times","label","Clear","styleClass","p-button-primary p-button-sm","severity","danger",3,"onClick","disabled"],["dataKey","order_id","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Details","position","top",3,"visibleChange","onHide","visible","modal","closable","maximizable"],["pTemplate","content"],["pTemplate","footer"],[3,"onHide","onSubmit","visible","invoice","suppliers"],["colspan","3","width","10%"],["size","small","pButton","","pRipple","","icon","fas fa-eye",1,"p-button-success",3,"click"],["size","small","pButton","","pRipple","","icon","fas fa-edit","severity","warning",3,"click"],["colspan","11"],["dataKey","order_item_id","styleClass","p-datatable-sm",3,"value",4,"ngIf"],["dataKey","order_item_id","styleClass","p-datatable-sm",3,"value"],["width","20%"],["width","35%"],["width","10%"],["width","5%"],["size","small","label","Close","icon","pi pi-times","severity","secondary",3,"onClick"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"p-card")(3,"p-fieldset",2)(4,"form",3),u("ngSubmit",function(){return o.submitSearch()}),r(5,"div",4)(6,"div",5),b(7,"input",6),s(),r(8,"div",5),b(9,"p-dropdown",7),s(),r(10,"div",5),b(11,"p-calendar",8),s(),r(12,"div",5),b(13,"p-button",9),r(14,"p-button",10),u("onClick",function(){return o.resetSearch()}),s()()()()(),r(15,"p-table",11),y(16,hn,11,0,"ng-template",12)(17,gn,14,6,"ng-template",13)(18,fn,3,0,"ng-template",14),s()()()(),r(19,"p-dialog",15),P("visibleChange",function(g){return T(o.detailsDialogVisible,g)||(o.detailsDialogVisible=g),g}),u("onHide",function(){return o.hideInvoiceDialog()}),y(20,Sn,1,1,"ng-template",16)(21,xn,1,0,"ng-template",17),s(),r(22,"edit-purchase",18),u("onHide",function(){return o.closeEditDialog()})("onSubmit",function(g){return o.submitEdit(g)}),s()),e&2&&(l(3),m("toggleable",!0),l(),m("formGroup",o.searchForm),l(5),m("options",o.suppliers)("filter",!0)("showClear",!0)("autoOptionFocus",!1),l(2),m("showIcon",!1)("showClear",!0)("readonlyInput",!0)("showButtonBar",!0),l(2),m("loading",o.loading()),l(),m("disabled",o.loading()),l(),m("value",o.purchasesHistory())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",E(28,un))("alwaysShowPaginator",!1)("loading",o.loading()),l(4),$(E(29,_n)),I("visible",o.detailsDialogVisible),m("modal",!0)("closable",!0)("maximizable",!0),l(3),m("visible",o.editDialogVisible)("invoice",o.selectedInvoice)("suppliers",o.suppliers))},dependencies:[Y,J,U,B,Q,X,Z,q,M,N,R,O,te,ee,W,L,ie,Dt,F]});let n=a;return n})();var wn=()=>[10,25,50];function En(n,a){n&1&&(r(0,"tr")(1,"th"),p(2,"Payment #"),s(),r(3,"th"),p(4,"Supplier"),s(),r(5,"th"),p(6,"Datetime"),s(),r(7,"th"),p(8,"total"),s(),r(9,"th",16),p(10,"Options"),s()())}function In(n,a){if(n&1){let i=x();r(0,"tr")(1,"td"),p(2),s(),r(3,"td"),p(4),s(),r(5,"td"),p(6),s(),r(7,"td"),p(8),C(9,"currency"),s(),r(10,"td")(11,"button",17),u("click",function(){let e=_(i).$implicit,o=c();return h(o.printInvoice(e))}),s()(),r(12,"td")(13,"button",18),u("click",function(){let e=_(i).$implicit,o=c();return h(o.openEditDialog(e))}),s()()()}if(n&2){let i=a.$implicit;l(2),v(i.journal_number),l(2),v(i.partner_name),l(2),v(i.payment_date),l(2),v(S(9,4,i.total_value))}}function Tn(n,a){n&1&&(r(0,"tr")(1,"td",19),p(2,"No Records Found!"),s()())}var kt=(()=>{let a=class a{constructor(){this.suppliersService=f(ue),this.historyService=f(ne),this.dateService=f(Fe),this.suppliers=[],this.suppliersLoading=this.suppliersService.suppliersLoading,this.detailsDialogVisible=!1,this.editDialogVisible=!1,this.subscriptions=new z,this.receiptsHistory=this.historyService.receiptsHistory,this.loading=this.historyService.signal_loading,this.searchForm=new K({payment_date:new V(null),partner_id:new V(null),payment_number:new V(null)})}ngOnInit(){this.subscriptions.add(this.suppliersService.suppliers$.subscribe(t=>{this.suppliers=t}))}ngOnDestroy(){this.subscriptions.unsubscribe()}get partner_id(){return this.searchForm.get("partner_id")}submitSearch(){this.searchForm.value.payment_date&&(this.searchForm.value.payment_date=this.dateService.formatDate(this.searchForm.value.payment_date)),this.historyService.fetchReceiptsHistory(this.searchForm.value)}resetSearch(){this.searchForm.reset(),this.historyService.fetchReceiptsHistory(null)}showInvoiceDialog(t){}printInvoice(t){}openEditDialog(t){this.selectedPayment=t,this.editDialogVisible=!0}hidePaymentDialog(){this.editDialogVisible=!1}getPaymentDilogResult(t){this.historyService.fetchReceiptsHistory(this.searchForm.value)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=k({type:a,selectors:[["app-receipts-history"]],decls:20,vars:23,consts:[[1,"grid","m-1"],[1,"col-12"],["legend","Search Form",3,"toggleable"],[3,"ngSubmit","formGroup"],[1,"grid"],[1,"col-12","md:col-6","lg:col-3"],["formControlName","payment_number","type","search","placeholder","Payment #","pInputText","","spellcheck","false",1,"p-inputtext-sm","w-full"],["formControlName","partner_id","styleClass","p-inputtext-sm w-full","id","supplier","appendTo","body","optionLabel","name","optionValue","account_id","placeholder","Select Supplier","filterBy","name",3,"options","loading","filter","showClear","autoOptionFocus"],["formControlName","payment_date","styleClass","p-inputtext-sm w-full","dateFormat","yy-mm-dd","placeholder","Date",3,"showIcon","showClear","readonlyInput"],["type","submit","label","search","icon","pi pi-search","pRipple","","size","small","severity","success",1,"mr-2",3,"loading"],["icon","pi pi-times","label","Clear","styleClass","p-button-primary p-button-sm","severity","danger",3,"onClick","disabled"],["dataKey","order_id","styleClass","p-datatable-sm",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions","alwaysShowPaginator","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["dialog_mode","edit",3,"onClose","onSubmit","visible","selected_payment","accounts"],["colspan","2","width","10%"],["size","small","pButton","","pRipple","","icon","pi pi-print","disabled","",1,"p-button-secondary",3,"click"],["size","small","pButton","","pRipple","","icon","fas fa-edit","severity","warning",3,"click"],["colspan","11"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1)(2,"p-card")(3,"p-fieldset",2)(4,"form",3),u("ngSubmit",function(){return o.submitSearch()}),r(5,"div",4)(6,"div",5),b(7,"input",6),s(),r(8,"div",5),b(9,"p-dropdown",7),s(),r(10,"div",5),b(11,"p-calendar",8),s(),r(12,"div",5),b(13,"p-button",9),r(14,"p-button",10),u("onClick",function(){return o.resetSearch()}),s()()()()(),r(15,"p-table",11),y(16,En,11,0,"ng-template",12)(17,In,14,6,"ng-template",13)(18,Tn,3,0,"ng-template",14),s()()()(),r(19,"supplier-payment-dialog",15),u("onClose",function(){return o.hidePaymentDialog()})("onSubmit",function(g){return o.getPaymentDilogResult(g)}),s()),e&2&&(l(3),m("toggleable",!0),l(),m("formGroup",o.searchForm),l(5),m("options",o.suppliers)("loading",o.suppliersLoading())("filter",!0)("showClear",!0)("autoOptionFocus",!1),l(2),m("showIcon",!1)("showClear",!0)("readonlyInput",!0),l(2),m("loading",o.loading()),l(),m("disabled",o.loading()),l(),m("value",o.receiptsHistory())("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",E(22,wn))("alwaysShowPaginator",!1)("loading",o.loading()),l(4),m("visible",o.editDialogVisible)("selected_payment",o.selectedPayment)("accounts",o.suppliers))},dependencies:[J,U,B,Q,X,Z,q,M,N,R,O,ee,W,L,ie,Ae,F]});let n=a;return n})();var Pn=[{path:"sales-history",data:{breadcrumb:"sales"},component:St},{path:"payment-history",data:{breadcrumb:"payments"},component:wt},{path:"return-history",data:{breadcrumb:"returns"},component:It},{path:"purchases-history",data:{breadcrumb:"purchases"},component:Ht},{path:"receipts-history",data:{breadcrumb:"receipts"},component:kt}],Ft=(()=>{let a=class a{};a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=Ee({type:a}),a.\u0275inj=we({imports:[Qe.forChild(Pn),Qe]});let n=a;return n})();var cs=(()=>{let a=class a{};a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=Ee({type:a}),a.\u0275inj=we({imports:[Ke,Ft,Je,Xe,de,st,et,Ze,lt,tt,it,ot,nt,pt,_t,rt,ht,dt,at,$e,Ae]});let n=a;return n})();export{cs as HistoryModule};
